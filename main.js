class t{constructor(t,e){this.object=t,this.attribute=e.toString()}get(){return this.object[this.attribute]}set(t){Object.defineProperty(this.object,this.attribute,{value:t})}toString(){return`${this.object[this.attribute]}`}fromString(t){const e=typeof this.object[this.attribute];let i;switch(e){case"string":i=t;break;case"number":i=Number.parseFloat(t);break;default:throw Error(`Reference.fromString() isn't yet supported for type ${e}`)}Object.defineProperty(this.object,this.attribute,{value:i})}}function e(e,...i){return i.map((i=>new t(e,i)))}class i extends Array{constructor(t){super(...t?.children);for(let t=0;t<this.length;++t){const e=this[t];"string"==typeof e&&(this[t]=document.createTextNode(e))}}replaceIn(t){t.replaceChildren(...this)}appendTo(t){for(let e of this)t.appendChild(e)}}function s(t,e,i){return void 0!==e&&void 0!==e.children&&(e.children=[e.children]),o(t,e)}function o(t,e,i){let s;if("string"!=typeof t)return new t(e);const o=t;switch(o){case"svg":case"line":case"rect":case"circle":case"path":case"text":s="http://www.w3.org/2000/svg";break;default:s="http://www.w3.org/1999/xhtml"}const r=document.createElementNS(s,o);return n(r,e,s),r}function n(t,e,i){if(null!=e){for(let[s,o]of Object.entries(e))switch(s){case"children":break;case"action":t.setAction(o);break;case"model":t.setModel(o);break;case"class":t.classList.add(o);break;case"style":for(let[e,i]of Object.entries(o)){const s=/[A-Z]/g;e=e.replace(s,(t=>"-"+t.toLowerCase())),"number"==typeof i&&(i=`${i}`),t.style.setProperty(e,i)}break;case"set":Object.defineProperty(e.set.object,e.set.attribute,{value:t});break;default:if("on"===s.substring(0,2))t.addEventListener(s.substring(2),o);else if("string"==typeof o||"number"==typeof o||"boolean"==typeof o){if("http://www.w3.org/2000/svg"===i){const t=/[A-Z]/g;s=s.replace(t,(t=>"-"+t.toLowerCase()))}t.setAttributeNS(null,s,`${o}`)}}void 0!==e.children&&r(t,e.children)}}function r(t,e){for(const i of e)i instanceof Array?r(t,i):"string"!=typeof i?t.appendChild(i):t.appendChild(document.createTextNode(i))}function l(t,...e){let i=t[0];return e.forEach(((e,s)=>{i=i.concat(e).concat(t[s+1])})),i}function a(t,e){const i=document.createElement(t);for(let t=0;t<e.length;++t){let s=e[t];s instanceof Array&&(e.splice(t,1,...s),s=e[t]),"string"!=typeof s?i.appendChild(s):i.appendChild(document.createTextNode(s))}return i}function c(t){return document.createTextNode(t)}const d=(...t)=>a("div",t),h=(...t)=>a("span",t),u=(...t)=>a("slot",t),p=(...t)=>a("form",t),f=(...t)=>a("input",t),b=(...t)=>a("button",t),v=(...t)=>a("label",t),g=(...t)=>a("li",t),m="http://www.w3.org/2000/svg";function w(t){const e=document.createElementNS(m,"svg");return void 0!==t&&e.appendChild(t),e}function x(t){const e=document.createElementNS(m,"path");return void 0!==t&&e.setAttributeNS(null,"d",t),e}function y(t,e,i,s,o,n){const r=document.createElementNS(m,"rect");return r.setAttributeNS(null,"x",`${t}`),r.setAttributeNS(null,"y",`${e}`),r.setAttributeNS(null,"width",`${i}`),r.setAttributeNS(null,"height",`${s}`),void 0!==o&&r.setAttributeNS(null,"stroke",o),void 0!==n&&r.setAttributeNS(null,"fill",n),r}function k(t,e,i,s,o,n){const r=document.createElementNS(m,"line");return r.setAttributeNS(null,"x1",`${t}`),r.setAttributeNS(null,"y1",`${e}`),r.setAttributeNS(null,"x2",`${i}`),r.setAttributeNS(null,"y2",`${s}`),void 0!==o&&r.setAttributeNS(null,"stroke",o),void 0!==n&&r.setAttributeNS(null,"fill",n),r}class A{constructor(t,e){this.callback=t,this.id=e}}class E{constructor(){this.locked=!1,this.busy=!1}add(t,e){this.callbacks||(this.callbacks=new Array),this.callbacks.push(new A(t,e))}remove(t){if(this.callbacks)for(let e=this.callbacks.length-1;e>=0;--e)this.callbacks[e].id===t&&this.callbacks.splice(e,1)}count(){return this.callbacks?this.callbacks.length:0}lock(){this.locked=!0}unlock(){if(this.locked=!1,this.triggered){let t=this.triggered.data;this.triggered=void 0,this.trigger(t)}}withLock(t){this.lock();const e=t();return this.unlock(),e}trigger(t){if(this.busy)return;if(this.busy=!0,this.locked)return this.triggered={data:t},void(this.busy=!1);if(!this.callbacks)return void(this.busy=!1);let e;for(let i=0;i<this.callbacks.length;++i)try{this.callbacks[i].callback(t)}catch(t){e=t}if(this.busy=!1,void 0!==e)throw e}}class M{constructor(t){this.modified=new E,this.options=t}set enabled(t){this.options?.enabled!==t&&(void 0===this.options&&(this.options={}),this.options.enabled=t,this.modified.trigger(void 0))}get enabled(){return!1!==this.options?.enabled}set color(t){this.options?.color!==t&&(void 0===this.options&&(this.options={}),this.options.color=t,this.modified.trigger(void 0))}get color(){return this.options?.color}set label(t){this.options?.label!==t&&(void 0===this.options&&(this.options={}),this.options.label=t,this.modified.trigger(void 0))}get label(){return this.options?.label}set description(t){this.options?.description!==t&&(void 0===this.options&&(this.options={}),this.options.description=t,this.modified.trigger(void 0))}get description(){return this.options?.description}set error(t){this.options?.error!==t&&(void 0===this.options&&(this.options={}),this.options.error=t,this.modified.trigger(void 0))}get error(){return this.options?.error}}class N extends M{constructor(t,e){super(e),this._value=t}set value(t){this._value!==t&&(this._value=t,this.modified.trigger(this._value))}get value(){return this._value}}class T extends N{map(t){const e=[];let i=0;return this.forEach(((s,o,n,r)=>{e.push(t(s,o,n,i++))})),e}get html(){let t;return this.forEach(((e,i,s,o)=>{this.value===e&&(t=s)})),this.asHtml(t)}asHtml(t){if("string"==typeof t)return h(c(t));if("number"==typeof t)return h(c(`${t}`));if("object"==typeof t&&t instanceof Node){let e=t.cloneNode(!0);const i=3;return t.nodeType===i&&(t=h(t)),e.style.height="100%",e.style.width="100%",e}return h(c(`${t}`))}indexOf(t){let e;return this.forEach(((i,s,o,n)=>{t===i&&(e=n)})),e}labelOf(t){let e;return this.forEach(((i,s,o,n)=>{t===i&&(e=o)})),e}isEnabledOf(t){let e=!1;return this.forEach(((i,s,o,n)=>{t===i&&(e=!0)})),e}set index(t){this.forEach(((e,i,s,o)=>{o===t&&(this.value=e)}))}get index(){let t;return this.forEach(((e,i,s,o)=>{this.value===e&&(t=o)})),t}next(){const t=this.index;this.index=void 0===t?0:t+1}prev(){const t=this.index;this.index=void 0===t?0:t-1}}class S extends T{constructor(t,e,i){super(t,i),this.enumType=e}forEach(t){let e="string";const i=Object.entries(this.enumType);for(const t of i){if("object"==typeof t[1]){e="object";break}if("number"==typeof t[1]){e="number";break}}let s=0;switch(e){case"object":for(const e of i)"object"==typeof e[1]&&t(e[1],e[0],this.asHtml(e[1]),s++);break;case"number":for(const e of i)"number"==typeof e[1]&&t(e[1],e[0],this.asHtml(e[0]),s++);break;default:for(const e of i)"string"==typeof e[0]&&t(e[1],e[0],this.asHtml(e[1]),s++)}}}class I extends N{constructor(t){super(t)}}class C extends N{constructor(t,e){super(t,e)}increment(){void 0!==this.step&&(this.value+=this.step)}decrement(){void 0!==this.step&&(this.value-=this.step)}set value(t){this.modified.withLock((()=>{let e;void 0!==this.min&&t<this.min&&(this.autocorrect?t=this.min:e=`The value must not be below ${this.min}.`),void 0!==this.max&&t>this.max&&(this.autocorrect?t=this.max:e=`The value must not be above ${this.max}.`),super.value=t,this.error=e}))}get value(){return super.value}set min(t){this.options?.min!==t&&(void 0===this.options&&(this.options={}),this.options.min=t,this.modified.trigger(void 0))}get min(){return this.options?.min}set max(t){this.options?.max!==t&&(void 0===this.options&&(this.options={}),this.options.max=t,this.modified.trigger(void 0))}get max(){return this.options?.max}set step(t){this.options?.step!==t&&(void 0===this.options&&(this.options={}),this.options.step=t,this.modified.trigger(void 0))}get step(){return this.options?.step}set autocorrect(t){this.options?.autocorrect!==t&&(void 0===this.options&&(this.options={}),this.options.autocorrect=t,this.modified.trigger(void 0))}get autocorrect(){return!0===this.options?.autocorrect}}class $ extends M{constructor(t="",e){super(e),this.value=t}set promise(t){this._value=t,this.modified.trigger()}get promise(){if("string"==typeof this._value){const t=this._value;return()=>t}return this._value}set value(t){this._value!==t&&("string"==typeof t?this.modified.withLock((()=>{this.error=void 0,this._value=t,this.modified.trigger()})):console.trace(`TextModel.set value(value: string): ${typeof t} is not type string`))}get value(){switch(typeof this._value){case"number":case"string":this._value=`${this._value}`;break;case"function":this._value=this._value()}return this._value}}class j extends ${constructor(t){super(t)}}class L extends M{constructor(t,e){super(),this.signal=new E,this.title=e}set value(t){throw Error("Action.value can not be assigned a value")}get value(){throw Error("Action.value can not return a value")}trigger(t){this.enabled&&this.signal.trigger(t)}}let O=new class{constructor(){this.modelId2Models=new Map,this.modelId2Views=new Map,this.view2ModelIds=new Map,this.sigChanged=new E}registerAction(t,e){let i=new L(void 0,t);return i.signal.add(e),this._registerModel("A:"+t,i),i}registerModel(t,e){this._registerModel("M:"+t,e)}_registerModel(t,e){let i=this.modelId2Models.get(t);i||(i=new Set,this.modelId2Models.set(t,i)),i.add(e);let s=this.modelId2Views.get(t);if(s)for(let t of s)t.setModel(e)}registerView(t,e){if(e.controller&&e.controller!==this)return void console.log("error: attempt to register view more than once at different controllers");e.controller=this;let i=this.view2ModelIds.get(e);i||(i=new Set,this.view2ModelIds.set(e,i)),i.add(t);let s=this.modelId2Views.get(t);s||(s=new Set,this.modelId2Views.set(t,s)),s.add(e);let o=this.modelId2Models.get(t);if(o)for(let t of o)e.setModel(t)}unregisterView(t){if(!t.controller)return;if(t.controller!==this)throw Error("attempt to unregister view from wrong controller");let e=this.view2ModelIds.get(t);if(e)for(let i of e){let e=this.modelId2Views.get(i);e&&(e.delete(t),0===e.size&&this.modelId2Views.delete(i),t.setModel(void 0))}}clear(){for(let t of this.view2ModelIds)t[0].setModel(void 0);this.modelId2Models.clear(),this.modelId2Views.clear(),this.view2ModelIds.clear()}bind(t,e){this.registerModel(t,e)}action(t,e){return this.registerAction(t,e)}text(t,e){let i=new $(e);return this.bind(t,i),i}html(t,e){let i=new j(e);return this.bind(t,i),i}boolean(t,e){let i=new I(e);return this.bind(t,i),i}number(t,e,i){let s=new C(e,i);return this.bind(t,s),s}};function V(t,e){return O.registerAction(t,e)}class _ extends HTMLElement{static define(t,e,i){const s=window.customElements.get(t);if(void 0===s)window.customElements.define(t,e,i);else if(s!==e){for(let s=0;s<255;++s){const o=`${t}-duplicate-${s}`;if(void 0===window.customElements.get(o))return console.log(`View::define(${t}, ...) with different constructor, using ${o} instead (known issue on Safari and Edge)`),void window.customElements.define(o,e,i)}console.error(`View::define(${t}, ...): attempt to redefine view with different constructor (known issue on Safari and Edge), giving up after 255 times`)}}constructor(t){super(),n(this,t)}setModel(t){console.trace("Please note that View.setModel(model) has no implementation.")}getModelId(){if(!this.hasAttribute("model"))throw Error("no 'model' attribute");let t=this.getAttribute("model");if(!t)throw Error("no model id");return"M:"+t}getActionId(){if(!this.hasAttribute("action"))throw Error("no 'action' attribute");let t=this.getAttribute("action");if(!t)throw Error("no action id");return"A:"+t}connectedCallback(){if(this.controller)return;let t="";try{t=this.getModelId()}catch(t){}""!=t&&O.registerView(t,this)}disconnectedCallback(){this.controller&&this.controller.unregisterView(this)}}const P=new CSSStyleSheet;P.replaceSync(l`:host(.tx-tabs){position:relative;display:flex;flex-wrap:nowrap;box-sizing:border-box}:host(.tx-tabs:not(.tx-vertical)){flex-direction:column}:host(.tx-tabs.tx-vertical){flex-direction:row}:host(.tx-tabs)>ul{display:flex;flex-wrap:nowrap;list-style:none;box-sizing:border-box;padding:0;margin:0}:host(.tx-tabs:not(.tx-vertical))>ul{flex-direction:row;border-bottom:2px solid var(--tx-gray-200)}:host(.tx-tabs.tx-vertical)>ul{border-left:2px solid var(--tx-gray-200);flex-direction:column}:host(.tx-tabs)>ul>li{box-sizing:border-box;list-style:none}:host(.tx-tabs)>ul>li>span{display:block;list-style:none;font-weight:500;margin:8px 12px 8px 12px;color:var(--tx-gray-700);cursor:pointer}:host(.tx-tabs.tx-vertical)>ul>li>span{margin:0;padding:12px 8px 12px 8px}:host(.tx-tabs)>ul>li>span.active{color:var(--tx-gray-900)}:host(.tx-tabs)>ul>li>span:hover{color:var(--tx-gray-900)}:host(.tx-tabs)>div.line{background-color:var(--tx-gray-900);pointer-events:none}:host(.tx-tabs:not(.tx-vertical))>div.line{transition:left .5s ease-in-out,width .5s .1s;position:relative;top:0;height:2px;left:12px;width:0}:host(.tx-tabs.tx-vertical)>div.line{transition:top .5s ease-in-out,width .5s .1s;position:absolute;left:0;height:0;width:2px}.content{flex-grow:1}`);class B extends _{constructor(t){super(t),void 0!==t?.model&&this.setModel(t.model)}updateModel(){}updateView(t){}setModel(t){if(t===this.model)return;const e=this;this.model&&this.model.modified.remove(e),t&&t.modified.add((t=>e.updateView(t)),e),this.model=t,this.isConnected&&this.updateView(void 0)}connectedCallback(){super.connectedCallback(),this.model&&this.updateView(void 0)}}class R extends B{constructor(t){super(t),this.labelMap=new Map,this.activateTab=this.activateTab.bind(this),this.classList.add("tx-tabs"),this.vertical=this.hasAttribute("vertical")||"vertical"===t?.orientation,this.vertical&&this.classList.add("tx-vertical"),this.content=d(u()),this.content.classList.add("content");let e=this.activeLabel,i=this.activePanel;const s=((...t)=>a("ul",t))();for(let t=0;t<this.children.length;++t){const o=this.children[t];if(!(o instanceof H)){console.log(`unexpected <${o.nodeName.toLowerCase()}> within <tabs>`);continue}const n=o;let r;s.appendChild(g(r=h(c(n.getAttribute("label"))))),r.onpointerdown=t=>{t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,this.activateTab(r,n)},this.labelMap.set(n,r),void 0!==e||void 0!==this.model&&this.model.value!==n.value?n.style.display="none":(e=r,i=n)}this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[P],this.shadowRoot.replaceChildren(s,this.markerLine=d(),this.content),this.markerLine.classList.add("line"),void 0!==e&&this.activateTab(e,i)}updateView(){if(this.model)for(let t=0;t<this.children.length;++t){const e=this.children[t];if(!(e instanceof H)){console.log(`unexpected <${e.nodeName.toLowerCase()}> within <tabs>`);continue}const i=e;if(this.model.value===i.value){this.activateTab(this.labelMap.get(i),i);break}}}activateTab(t,e){this.activePanel!==e&&(void 0!==this.activeLabel&&void 0!==this.activePanel&&(this.activeLabel.classList.remove("active"),this.activePanel.style.display="none",this.activePanel.close()),this.activeLabel=t,this.activePanel=e,this.activePanel.open(),this.activeLabel.classList.add("active"),this.activePanel.style.display="",setTimeout((()=>this.adjustLine()),0),this.model&&void 0!==e.value&&(this.model.value=e.value))}adjustLine(){const t=this.markerLine,e=this.activeLabel;void 0!==e&&(this.vertical?(t.style.top=`${e.offsetTop}px`,t.style.height=`${e.clientHeight}px`):(t.style.top="-2px",t.style.left=`${e.offsetLeft}px`,t.style.width=`${e.clientWidth}px`))}}R.define("tx-tabs",R);class H extends _{constructor(t){super(t),this.value=t?.value,this.label=t?.label,this.content=t?.content}open(){if(0===this.childNodes.length&&void 0!==this.content){const t=this.content();t instanceof Promise?t.then((t=>{if("object"==typeof t&&"default"in t){const e=t.default;if("function"==typeof e){const t=e();t instanceof Promise?t.then((t=>{D(this,t)})):D(this,e())}else D(this,e)}})):D(this,this.content())}}close(){}}function D(t,e){for(const i of e)i instanceof Array?D(t,i):"string"!=typeof i?t.appendChild(i):t.appendChild(document.createTextNode(i))}var U;function F(t){return`${location.origin}${location.pathname}#${t.value}`}_.define("tx-tab",H),function(t){t.INTRODUCTION="introduction",t.DEMO="demo",t.FORM="form",t.ACTION="action",t.TEXT="text",t.NUMBER="number",t.BOOLEAN="boolean",t.CHOICE="choice",t.TABLE="table",t.TABS="tabs"}(U||(U={})),window.onload=()=>{const t=new S(U.INTRODUCTION,U);!function(t){if(location.hash.length>1){const e=location.hash.substring(1);void 0===t.indexOf(e)?history.replaceState(void 0,"",F(t)):t.value=e}else history.replaceState(void 0,"",F(t));window.onpopstate=e=>{location.hash.length>1?t.value=location.hash.substring(1):t.value=U.INTRODUCTION},t.modified.add((e=>{location.hash!==`#${e}`&&history.pushState(void 0,"",F(t))}))}(t),document.body.replaceChildren(...o(i,{children:[o("p",{style:{textAlign:"center"},children:[s("img",{src:"static/toad.gif",alt:"TOAD"}),s("br",{}),"Web Edition"]}),o(R,{orientation:"vertical",model:t,children:[s(H,{value:U.INTRODUCTION,label:"Introduction",content:()=>import("./index-bb5833f5.js")}),s(H,{value:U.DEMO,label:"Demo",content:()=>import("./index-fc138d84.js")}),s(H,{value:U.FORM,label:"Form",content:()=>import("./index-e2574ed4.js")}),s(H,{value:U.ACTION,label:"Action",content:()=>import("./index-8645e7f8.js")}),s(H,{value:U.TEXT,label:"Text",content:()=>import("./index-c8e5afb8.js")}),s(H,{value:U.NUMBER,label:"Number",content:()=>import("./index-3c4c6ae7.js")}),s(H,{value:U.BOOLEAN,label:"Boolean",content:()=>import("./index-a8b90c25.js")}),s(H,{value:U.CHOICE,label:"Choice",content:()=>import("./index-cc02f98d.js")}),s(H,{value:U.TABLE,label:"Table",content:()=>import("./index-3ccded71.js")}),s(H,{value:U.TABS,label:"Tabs",content:()=>import("./index-247a097f.js")})]})]}))};export{L as A,I as B,S as E,i as F,N as G,j as H,B as M,C as N,T as O,$ as T,_ as V,s as a,V as b,l as c,h as d,d as e,w as f,e as g,O as h,b as i,o as j,f as k,k as l,p as m,v as n,g as o,x as p,M as q,y as r,u as s,c as t,n as u,R as v,H as w};
