var toad=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="./src/toad.ts")}({"./src/action.ts":
/*!***********************!*\
  !*** ./src/action.ts ***!
  \***********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;const i=o(/*! ./model */"./src/model.ts"),n=o(/*! ./signal */"./src/signal.ts");class s extends i.Model{constructor(e,t){super(),this.signal=new n.Signal,this.title=t,this._enabled=!0}set value(e){throw Error("Action.value can not be assigned a value")}get value(){throw Error("Action.value can not return a value")}set enabled(e){this._enabled!=e&&(this._enabled=e,this.modified.trigger())}get enabled(){return this._enabled}trigger(e){this._enabled&&this.signal.trigger(e)}}t.Action=s},"./src/controller.ts":
/*!***************************!*\
  !*** ./src/controller.ts ***!
  \***************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=t.text=t.unbind=t.action=t.bind=t.globalController=t.Dialog=t.Template=t.Controller=void 0;const i=o(/*! ./dom */"./src/dom.ts"),n=o(/*! ./model */"./src/model.ts"),s=o(/*! ./action */"./src/action.ts"),r=o(/*! ./signal */"./src/signal.ts");class d{constructor(){this.modelId2Models=new Map,this.modelId2Views=new Map,this.view2ModelIds=new Map,this.sigChanged=new r.Signal}registerAction(e,t){let o=new s.Action(void 0,e);return o.signal.add(t),this._registerModel("A:"+e,o),o}registerModel(e,t){this._registerModel("M:"+e,t)}_registerModel(e,t){let o=this.modelId2Models.get(e);o||(o=new Set,this.modelId2Models.set(e,o)),o.add(t);let i=this.modelId2Views.get(e);if(i)for(let e of i)e.setModel(t)}registerView(e,t){if(t.controller&&t.controller!==this)return void console.log("error: attempt to register view more than once at different controllers");t.controller=this;let o=this.view2ModelIds.get(t);o||(o=new Set,this.view2ModelIds.set(t,o)),o.add(e);let i=this.modelId2Views.get(e);i||(i=new Set,this.modelId2Views.set(e,i)),i.add(t);let n=this.modelId2Models.get(e);if(n)for(let e of n)t.setModel(e)}unregisterView(e){if(!e.controller)return;if(e.controller!==this)throw Error("attempt to unregister view from wrong controller");let t=this.view2ModelIds.get(e);if(t)for(let o of t){let t=this.modelId2Views.get(o);t&&(t.delete(e),0===t.size&&this.modelId2Views.delete(o),e.setModel(void 0))}}clear(){for(let e of this.view2ModelIds)e[0].setModel(void 0);this.modelId2Models.clear(),this.modelId2Views.clear(),this.view2ModelIds.clear()}bind(e,t){this.registerModel(e,t)}action(e,t){return this.registerAction(e,t)}text(e,t){let o=new n.TextModel(t);return this.bind(e,o),o}html(e,t){let o=new n.HtmlModel(t);return this.bind(e,o),o}boolean(e,t){let o=new n.BooleanModel(t);return this.bind(e,o),o}number(e,t,o){let i=new n.NumberModel(t,o);return this.bind(e,i),i}}t.Controller=d;t.Template=class extends d{constructor(e){super(),this.root=i.instantiateTemplate(e),this.registerViews()}registerViews(){let e=this.root.querySelectorAll("[model]");for(let t of e){let e=t;if(e)try{this.registerView(e.getModelId(),e)}catch(e){}}e=this.root.querySelectorAll("[action]");for(let t of e){let e=t;if(e)try{this.registerView(e.getActionId(),e)}catch(e){}}}openHref(e){}};t.Dialog=class extends d{constructor(){super()}open(e){let t=document.createElement("div");t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.right="0",t.style.bottom="0",t.style.backgroundColor="#aaa",t.style.opacity="0.5",this.shadow=t,document.body.appendChild(t);let o,i=document.head.querySelectorAll("link[rel=import]");for(let t of i)if(t.href===e){o=t;break}if(o)o.dispatchEvent(new Event("load"));else{let t=document.createElement("link");t.rel="import",t.href=e,t.onload=o=>{let i=t.import.querySelector("template");if(!i)throw Error("toad.openDialog: failed to find template in '"+e+"'");let n=document.importNode(i.content,!0);this.registerViews(n);let s=document.createElement("div");s.style.position="absolute",s.style.left="5%",s.style.top="5%",s.style.right="5%",s.style.bottom="5%",s.style.backgroundColor="#fff",s.style.border="solid 2px #000",s.appendChild(n),document.body.appendChild(s),this.frame=s},document.head.appendChild(t)}}close(){this.frame&&document.body.removeChild(this.frame),this.shadow&&document.body.removeChild(this.shadow)}registerViews(e){let t=e.querySelectorAll("[model]");for(let e of t){let t=e;if(t)try{this.registerView(t.getModelId(),t)}catch(e){}}t=e.querySelectorAll("[action]");for(let e of t){let t=e;if(t)try{this.registerView(t.getActionId(),t)}catch(e){}}}},t.globalController=new d,t.bind=function(e,o){t.globalController.bind(e,o)},t.action=function(e,o){return t.globalController.registerAction(e,o)},t.unbind=function(){t.globalController.clear()},t.text=function(e,o){return t.globalController.text(e,o)},t.boolean=function(e,o){return t.globalController.boolean(e,o)}},"./src/dom.ts":
/*!********************!*\
  !*** ./src/dom.ts ***!
  \********************/
/*! no static exports found */function(e,t,o){"use strict";function i(e){let t=document.querySelector('template[id="'+e+'"]');if(!t)throw new Error("failed to find template '"+e+"'");let o=t.content;return document.importNode(o,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.order=t.attributeOrUndefined=t.attribute=t.grabMouse=t.erase=t.remove=t.add=t.img=t.txt=t.tag=t.find=t.tmpl=t.instantiateTemplate=void 0,t.instantiateTemplate=function(e){return i(e)},t.tmpl=i,t.find=function(e,t){return e.querySelector(t)},t.tag=function(e){return document.createElement(e)},t.txt=function(e){return document.createTextNode(e)},t.img=function(e){let t=document.createElement("img");return t.src=e,t},t.add=function(e,t){e.appendChild(t)},t.remove=function(e){if(!e.parentNode)throw Error("element has no parent");e.parentNode.removeChild(e)},t.erase=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.grabMouse=function(e){let t=e.target,o=e=>{t.dispatchEvent(new MouseEvent("mousemove",e)),e.stopPropagation()},i=e=>{t.dispatchEvent(new MouseEvent("mouseup",e)),document.removeEventListener("mousemove",o,{capture:!0}),document.removeEventListener("mouseup",i,{capture:!0}),document.body.style.pointerEvents="auto",e.stopPropagation()};document.addEventListener("mousemove",o,{capture:!0}),document.addEventListener("mouseup",i,{capture:!0}),document.body.style.pointerEvents="none",e.preventDefault(),e.stopPropagation()},t.attribute=function(e,t){let o=e.getAttribute(t);if(null===o)throw console.log("missing attribute '"+t+"' in ",e),Error("missing attribute '"+t+"' in "+e.nodeName);return o},t.attributeOrUndefined=function(e,t){let o=e.getAttribute(t);return null===o?void 0:o},t.order=function(e,t){let o,i=new Map,n=e;for(o=e;n=o,o=o.parentNode,o;)i.set(o,n);let s=t;for(o=t;o;){if(s=o,o=o.parentNode,!o)throw Error("fuck");let e=i.get(o);if(e){n=e;break}o=o.parentNode}if(!o)throw Error("fuck");for(let e of o.childNodes){if(e===n)return!0;if(e===s)return!1}throw Error("fuck")}},"./src/matrix.ts":
/*!***********************!*\
  !*** ./src/matrix.ts ***!
  \***********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;class i{constructor(e){void 0===e?(this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.tX=0,this.tY=0):(this.m11=e.m11,this.m12=e.m12,this.m21=e.m21,this.m22=e.m22,this.tX=e.tX,this.tY=e.tY)}identity(){this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.tX=0,this.tY=0}append(e){let t=this.m11*e.m11+this.m12*e.m21,o=this.m11*e.m12+this.m12*e.m22,i=this.m21*e.m11+this.m22*e.m21,n=this.m21*e.m12+this.m22*e.m22,s=this.tX*e.m11+this.tY*e.m21+e.tX,r=this.tX*e.m12+this.tY*e.m22+e.tY;this.m11=t,this.m12=o,this.m21=i,this.m22=n,this.tX=s,this.tY=r}prepend(e){let t=e.m11*this.m11+e.m12*this.m21,o=e.m11*this.m12+e.m12*this.m22,i=e.m21*this.m11+e.m22*this.m21,n=e.m21*this.m12+e.m22*this.m22,s=e.tX*this.m11+e.tY*this.m21+this.tX,r=e.tX*this.m12+e.tY*this.m22+this.tY;this.m11=t,this.m12=o,this.m21=i,this.m22=n,this.tX=s,this.tY=r}invert(){let e=1/(this.m11*this.m22-this.m21*this.m12),t=e*this.m22,o=e*-this.m12,i=e*-this.m21,n=e*this.m11,s=e*(this.m21*this.tY-this.m22*this.tX),r=e*(this.m12*this.tX-this.m11*this.tY);this.m11=t,this.m12=o,this.m21=i,this.m22=n,this.tX=s,this.tY=r}translate(e){let t=new i({m11:1,m12:0,m21:0,m22:1,tX:e.x,tY:e.y});this.append(t)}rotate(e){let t=new i({m11:Math.cos(e),m12:Math.sin(e),m21:-Math.sin(e),m22:Math.cos(e),tX:0,tY:0});this.append(t)}scale(e,t){let o=new i({m11:e,m12:0,m21:0,m22:t,tX:0,tY:0});this.append(o)}transformPoint(e){return{x:e.x*this.m11+e.y*this.m21+this.tX,y:e.x*this.m12+e.y*this.m22+this.tY}}transformArrayPoint(e){return[e[0]*this.m11+e[1]*this.m21+this.tX,e[0]*this.m12+e[1]*this.m22+this.tY]}}t.Matrix=i},"./src/model.ts":
/*!**********************!*\
  !*** ./src/model.ts ***!
  \**********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionModel=t.OptionModelBase=t.BooleanModel=t.NumberModel=t.HtmlModel=t.TextModel=t.GenericModel=t.Model=void 0;const i=o(/*! ./signal */"./src/signal.ts");class n{constructor(){this.modified=new i.Signal}}t.Model=n;class s extends n{constructor(e){super(),this._value=e}set value(e){this._value!=e&&(this._value=e,this.modified.trigger())}get value(){return this._value}}t.GenericModel=s;class r extends n{constructor(e){super(),this._value=e}set promise(e){this._value=e,this.modified.trigger()}get promise(){return"string"==typeof this._value?()=>this._value:this._value}set value(e){this._value!=e&&(this._value=e,this.modified.trigger())}get value(){return"number"==typeof this._value?this._value=String(this._value):"string"!=typeof this._value&&(this._value=this._value()),this._value}}t.TextModel=r;t.HtmlModel=class extends r{constructor(e){super(e)}};t.NumberModel=class extends s{constructor(e,t){super(e),t&&(this.min=t.min,this.max=t.max,this.step=t.step)}};t.BooleanModel=class extends s{constructor(e){super(e)}};class d extends n{constructor(){super(),this._stringValue=""}set stringValue(e){this._stringValue!==e&&(this._stringValue=e,this.modified.trigger())}get stringValue(){return this._stringValue}isValidStringValue(e){return!1}}t.OptionModelBase=d;t.OptionModel=class extends d{constructor(){super(),this._map=new Map}add(e,t){this._map.set(e,t)}isValidStringValue(e){return this._map.has(e)}get value(){return this._map.get(this.stringValue)}}},"./src/signal.ts":
/*!***********************!*\
  !*** ./src/signal.ts ***!
  \***********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signal=t.SignalLink=void 0;class i{constructor(e,t){this.callback=e,this.id=t}}t.SignalLink=i;t.Signal=class{add(e,t){this.callbacks||(this.callbacks=new Array),this.callbacks.push(new i(e,t))}remove(e){if(this.callbacks)for(let t=this.callbacks.length-1;t>=0;--t)this.callbacks[t].id===e&&this.callbacks.splice(t,1)}count(){return this.callbacks?this.callbacks.length:0}lock(){this.locked=!0}unlock(){if(this.locked=void 0,this.triggered){let e=this.triggered.data;this.triggered=void 0,this.trigger(e)}}trigger(e){if(this.locked)this.triggered={data:e};else if(this.callbacks)for(let t=0;t<this.callbacks.length;++t)this.callbacks[t].callback(e)}}},"./src/svg.ts":
/*!********************!*\
  !*** ./src/svg.ts ***!
  \********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.circle=t.rectangle=t.line=void 0,t.line=function(e,t,o,i){const n=document.createElementNS("http://www.w3.org/2000/svg","line");return n.setAttributeNS("","stroke","#000"),n.setAttributeNS("","x1",""+e),n.setAttributeNS("","y1",""+t),n.setAttributeNS("","x2",""+o),n.setAttributeNS("","y2",""+i),n},t.rectangle=function(e,t,o,i){const n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttributeNS("","stroke","#000"),n.setAttributeNS("","fill","none"),n.setAttributeNS("","x",""+e),n.setAttributeNS("","y",""+t),n.setAttributeNS("","width",""+o),n.setAttributeNS("","height",""+i),n},t.circle=function(e,t,o){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttributeNS("","stroke","#000"),i.setAttributeNS("","cx",""+e),i.setAttributeNS("","cy",""+t),i.setAttributeNS("","r",""+o),i},t.text=function(e,t,o){const i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.setAttributeNS("","fill","#000"),i.setAttributeNS("","x",""+e),i.setAttributeNS("","y",""+t),i.appendChild(document.createTextNode(o)),i.style.pointerEvents="none",i}},"./src/table/ArrayTableModel.ts":
/*!**************************************!*\
  !*** ./src/table/ArrayTableModel.ts ***!
  \**************************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayTableModel=void 0;const i=o(/*! ../model */"./src/model.ts"),n=o(/*! ../view/text */"./src/view/text.ts"),s=o(/*! ./TableModel */"./src/table/TableModel.ts");class r extends s.TableModel{constructor(e){super(),this.data=e}get colCount(){return this.data?this.data[0].length:0}get rowCount(){return this.data?this.data.length:0}getColumnHead(e){switch(e){case 0:return new i.TextModel("Title");case 1:return new i.TextModel("Author");case 2:return new i.TextModel("Year")}throw Error("fuck")}getFieldModel(e,t){let o=new i.TextModel(this.data[t][e]);return o.modified.add(()=>{this.data[t][e]=o.value}),o}getFieldView(e,t){return new n.TextView}}t.ArrayTableModel=r},"./src/table/SelectionModel.ts":
/*!*************************************!*\
  !*** ./src/table/SelectionModel.ts ***!
  \*************************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;const i=o(/*! ../model */"./src/model.ts"),n=o(/*! ./table */"./src/table/table.ts");class s extends i.Model{constructor(){super(),this.mode=n.TableEditMode.SELECT_ROW,this._value=new n.TablePos(0,0)}set col(e){this._value.col!==e&&(this._value.col=e,this.modified.trigger())}get col(){return this._value.col}set row(e){this._value.row!==e&&(this._value.row=e,this.modified.trigger())}get row(){return this._value.row}set value(e){this._value.col===e.col&&this._value.row===e.row||(this._value=e,this.modified.trigger())}get value(){return this._value}}t.SelectionModel=s},"./src/table/TableModel.ts":
/*!*********************************!*\
  !*** ./src/table/TableModel.ts ***!
  \*********************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableModel=void 0;const i=o(/*! ../model */"./src/model.ts");class n extends i.Model{isEmpty(){return 0===this.colCount&&0===this.rowCount}getColumnHead(e){}getFieldView(e,t){}}t.TableModel=n},"./src/table/TableView.ts":
/*!********************************!*\
  !*** ./src/table/TableView.ts ***!
  \********************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableView=t.treeStyle=void 0;const i=o(/*! ../dom */"./src/dom.ts"),n=o(/*! ../model */"./src/model.ts"),s=o(/*! ../view */"./src/view.ts"),r=o(/*! ./TableModel */"./src/table/TableModel.ts"),d=o(/*! ./SelectionModel */"./src/table/SelectionModel.ts"),l=o(/*! ./table */"./src/table/table.ts");function a(e,t){return function(e){if("px"!==e.substr(e.length-2))throw Error("expected 'px' suffix");return Number.parseFloat(e.substr(0,e.length-2))}(window.getComputedStyle(e,void 0).getPropertyValue(t))}function c(e){return a(e,"padding-left")+a(e,"padding-right")}document.createElement("style").textContent="\n.t2 {\n  /* border: 1px inset; */\n  border: 1px #ccc solid;\n  border-radius: 3px;\n  outline-offset: -2px;\n  font-family: var(--toad-font-family, sans-serif);\n  font-size: var(--toad-font-size, 12px);\n}\n\n.t2h, .t2d {\n  border-color: #ccc #fff #fff #ccc;\n  border-width: 2px 0px 0px 2px;\n  border-style: solid none none solid;\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n/* FIXME: there is no re-evaluation after the table view was resized */\n/*\nth:last-child, td:last-child {\n  width: 100%;\n}\n*/\n\n.t2h tr {\n  background: #e0e0e0;\n}\n\n.t2h * th {\n  border-color: #fff #ccc #ccc #fff;\n  border-style: none solid none none;\n  border-width: 0 1px 0 0;\n  z-index: 1;\n  letter-spacing: 0;  \n  overflow: hidden;   \n  padding: 2px;\n  margin: 0px; \n  white-space: nowrap;\n}\n \n.t2d * td {\n  border-color: #fff #ccc #ccc #fff;\n  border-style: none solid solid none;\n  border-width: 0 1px 1px 0;\n  letter-spacing: 0;\n  overflow: hidden; \n  padding: 2px;\n  margin: 0px; \n  white-space: nowrap;\n  /* background: #fff; */\n}\n\n.t2d tr:nth-child(even) {\n  background: var(--toad-table-even-row, #f5f5f5);\n}\n.t2d tr:nth-child(odd) {\n  background: var(--toad-table-odd-row, #ffffff);\n}\n\ndiv .t2d tr.selected,\ndiv .t2d tr td.selected {\n/*\n  background: #dcdcdc;\n  color: #000;\n*/\n  background: #808080;\n  color: #fff;\n}\n\n.t2:focus .t2d tr.selected,\n.t2:focus .t2d tr td.selected {\n  background: #0069d4;\n  color: #fff;\n}\n",t.treeStyle=document.createElement("style"),t.treeStyle.textContent="\n.t2 {\n  /* border: 1px inset; */\n  border: 1px #ccc solid;\n  border-radius: 3px;\n  outline-offset: -2px;\n  font-family: var(--toad-font-family, sans-serif);\n  font-size: var(--toad-font-size, 12px);\n}\n\n.t2h, .t2d {\n  border-color: #ccc #fff #fff #ccc;\n  border-width: 2px 0px 0px 2px;\n  border-style: solid none none solid;\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n/* FIXME: there is no re-evaluation after the table view was resized */\n/*\nth:last-child, td:last-child {\n  width: 100%;\n}\n*/\n\n.t2h tr {\n  background: #e0e0e0;\n}\n\n.t2h * th {\n  border-color: none;\n  border-style: none;\n  border-width: 0;\n  z-index: 1;\n  letter-spacing: 0;  \n  overflow: hidden;   \n  padding: 0px;\n  margin: 0px; \n  white-space: nowrap;\n}\n\n.t2d * td {\n  border-color: none;\n  border-style: none;\n  border-width: 0;\n  letter-spacing: 0;\n  overflow: hidden; \n  padding: 0px;\n  margin: 0px; \n  white-space: nowrap;\n  /* background: #fff; */\n}\n\n.t2d tr:nth-child(even) {\n  background: var(--toad-table-even-row, #f5f5f5);\n}\n.t2d tr:nth-child(odd) {\n  background: var(--toad-table-odd-row, #ffffff);\n}\n\ndiv .t2d tr.selected,\ndiv .t2d tr td.selected {\n/*\n  background: #dcdcdc;\n  color: #000;\n*/\n  background: #808080;\n  color: #fff;\n}\n\n.t2:focus .t2d tr.selected,\n.t2:focus .t2d tr td.selected {\n  background: #0069d4;\n  color: #fff;\n}\n";class h extends s.GenericView{constructor(){super(),this.insideGoTo=!1,this.rootDiv=document.createElement("div"),this.rootDiv.className="t2",this.rootDiv.onkeydown=e=>{if(this.selectionModel)switch(this.selectionModel.mode){case l.TableEditMode.SELECT_ROW:{let t=this.selectionModel.value.row;switch(e.key){case"ArrowDown":t+1<this.model.rowCount&&++t;break;case"ArrowUp":t>0&&--t}t!=this.selectionModel.value.row&&(this.toggleRowSelection(this.selectionModel.value.row,!1),this.selectionModel.row=t,this.toggleRowSelection(this.selectionModel.value.row,!0))}break;case l.TableEditMode.SELECT_CELL:{let t={col:this.selectionModel.col,row:this.selectionModel.row};switch(e.key){case"ArrowRight":t.col+1<this.model.colCount&&++t.col;break;case"ArrowLeft":t.col>0&&--t.col;break;case"ArrowDown":t.row+1<this.model.rowCount&&++t.row;break;case"ArrowUp":t.row>0&&--t.row}t.col==this.selectionModel.col&&t.row==this.selectionModel.row||(this.toggleCellSelection(this.selectionModel.value,!1),this.selectionModel.value=t,this.toggleCellSelection(this.selectionModel.value,!0))}}};let e=document.createElement("div");e.style.overflow="hidden";let o=document.createElement("table");this.headTable=o,o.className="t2h";let n=document.createElement("thead"),s=document.createElement("tr");this.headRow=s,n.appendChild(s),o.appendChild(n),e.appendChild(o),this.rootDiv.appendChild(e);let r=document.createElement("div");r.style.overflow="auto",r.onscroll=function(){e.scrollLeft=r.scrollLeft},this.bodyDiv=r;let d=document.createElement("table");d.className="t2d",d.onmousedown=e=>{e.srcElement&&"TD"===e.srcElement.tagName&&(e.preventDefault(),this.goToField(e.srcElement))};let a=document.createElement("tbody");this.bodyBody=a;let c=document.createElement("tr");this.bodyRow=c,a.appendChild(c),d.appendChild(a),r.appendChild(d);let h=document.createElement("div");h.style.width="0px",h.style.height="0px",h.style.margin="0",h.style.padding="0",h.style.border="none",this.inputDiv=document.createElement("div"),this.inputDiv.style.position="relative",this.inputDiv.style.background="#fff",this.inputDiv.style.border="none",this.inputDiv.style.opacity="0",this.inputDiv.addEventListener("focusin",e=>{if(this.inputDiv.style.opacity="1",this.insideGoTo)return;if(!this.model)return;let t=e;t.target&&t.relatedTarget&&(i.order(t.relatedTarget,this)?this.goTo(0,0):this.goTo(this.model.colCount-1,this.model.rowCount-1))}),this.inputDiv.addEventListener("focusout",()=>{this.inputDiv.style.opacity="0"}),h.appendChild(this.inputDiv),r.appendChild(h),this.rootDiv.appendChild(r),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(t.treeStyle,!0)),this.shadowRoot.appendChild(this.rootDiv)}connectedCallback(){super.connectedCallback(),this.bodyDiv.style.height=this.style.height}setModel(e){if(!e)return this.selectionModel&&this.selectionModel.modified.remove(this),this.model=void 0,this.selectionModel=new d.SelectionModel,void this.updateView();if(e instanceof d.SelectionModel)this.selectionModel=e,this.updateSelection(),this.selectionModel.modified.add(()=>{this.updateSelection()},this);else{if(!(e instanceof r.TableModel))throw Error("unexpected model of type "+e.constructor.name);this.model=e,this.updateView()}}updateModel(){}updateView(){this.model&&(this.updateHeader(),this.updateBody(),this.updateSelection(),setTimeout(()=>{this.adjustInternalTables()}))}updateHeader(){if(!this.model)throw Error("fuck");let e,t=!1;for(;this.headRow.children.length>this.model.colCount+1;)this.headRow.removeChild(this.headRow.children[this.headRow.children.length-1]);for(let e=0;e<this.model.colCount;++e){let o;e>=this.headRow.children.length?(o=i.tag("th"),this.headRow.appendChild(o)):(o=this.headRow.children[e],o.style.minWidth="",o.style.border="");let s=this.model.getColumnHead(e);void 0!==s?s instanceof n.HtmlModel?o.innerHTML=s.value:o.innerText=s.value:t=!0}this.headRow.children.length<this.model.colCount+1?(e=i.tag("th"),this.headRow.appendChild(e)):e=this.headRow.children[this.headRow.children.length-1],e.innerText="",e.style.minWidth="777px",e.style.border="0px none",this.headTable.style.display=t?"none":""}updateBody(){if(!this.model)throw Error("fuck");for(;this.bodyRow.children.length>this.model.colCount;)this.bodyRow.removeChild(this.bodyRow.children[this.bodyRow.children.length-1]);for(;this.bodyRow.children.length<this.model.colCount;){let e=i.tag("td");e.style.paddingTop="0",e.style.paddingBottom="0",this.bodyRow.appendChild(e)}for(;this.bodyBody.children.length-1>this.model.rowCount;)this.bodyBody.removeChild(this.bodyBody.children[this.bodyBody.children.length-1]);for(let e=0;e<this.model.rowCount;++e){let t;for(e+1>=this.bodyBody.children.length?(t=document.createElement("tr"),this.bodyBody.appendChild(t)):t=this.bodyBody.children[e+1];t.children.length>this.model.colCount;)t.removeChild(t.children[t.children.length-1]);for(let o=0;o<this.model.colCount;++o){let i;o>=t.children.length?(i=document.createElement("td"),t.appendChild(i)):i=t.children[o],i.style.width="";let s=this.model.getFieldModel(o,e);i.innerText!=s.value&&(s instanceof n.HtmlModel?i.innerHTML=s.value:s instanceof n.TextModel?i.innerText=s.value:i.appendChild(this.model.getFieldView(o,e)))}if("100%"===this.style.width){t.children[t.children.length-1].style.width="100%"}}}updateSelection(){if(void 0!==this.selectionModel)switch(this.selectionModel.mode){case l.TableEditMode.EDIT_CELL:this.prepareFieldAtPosition(this.selectionModel.col,this.selectionModel.row),delete this.rootDiv.tabIndex;break;case l.TableEditMode.SELECT_CELL:{let e=this.bodyBody.querySelectorAll("tbody > tr > td.selected");for(let t of e)t.classList.remove("selected");this.toggleCellSelection(this.selectionModel.value,!0),this.rootDiv.tabIndex=0;break}case l.TableEditMode.SELECT_ROW:{let e=this.bodyBody.querySelectorAll("tbody > tr.selected");for(let t of e)t.classList.remove("selected");this.toggleRowSelection(this.selectionModel.value.row,!0),this.rootDiv.tabIndex=0;break}}}adjustInternalTables(){let e=this.headRow.children,t=this.bodyRow.children;for(let o=0;o<this.model.colCount;++o){let i=e[o],n=t[o],s=i.clientWidth-c(i),r=n.clientWidth-c(n);i.style.width=i.style.minWidth=i.style.maxWidth=n.style.width=n.style.minWidth=n.style.maxWidth=(s>r?s:r)+"px"}"100%"!==this.style.width&&(this.rootDiv.style.width=this.bodyRow.clientWidth+this.bodyDiv.offsetWidth-this.bodyDiv.clientWidth+2+"px")}unadjustInternalTables(e){let t=this.headRow.children,o=this.bodyRow.children,i=t[e.col],n=o[e.col];i.style.width=i.style.minWidth=i.style.maxWidth=n.style.width=n.style.minWidth=n.style.maxWidth=""}toggleCellSelection(e,t){if(e.col>=this.model.colCount||e.row>=this.model.rowCount)return;let o=this.bodyBody.children[e.row+1].children[e.col];o.classList.toggle("selected",t),t&&(o.scrollIntoViewIfNeeded?o.scrollIntoViewIfNeeded():o.scrollIntoView())}toggleRowSelection(e,t){if(e>=this.model.rowCount)return;let o=this.bodyBody.children[1+this.selectionModel.value.row];o.classList.toggle("selected",t),t&&(o.scrollIntoViewIfNeeded?o.scrollIntoViewIfNeeded():o.scrollIntoView())}adjustInputToElement(e){let t=e.getBoundingClientRect(),o=e,i=o.parentElement.parentElement;navigator.userAgent.indexOf("Chrome")>-1?(this.inputDiv.style.left=o.offsetLeft+2+"px",this.inputDiv.style.top=o.offsetTop-i.clientHeight+"px"):(this.inputDiv.style.left=o.offsetLeft+1+"px",this.inputDiv.style.top=o.offsetTop-i.clientHeight-1+"px");let n=e.clientWidth-c(e)+"px";this.inputDiv.style.width=n,this.inputDiv.style.height=t.height+"px"}goTo(e,t){this.insideGoTo=!0,this.prepareFieldAtPosition(e,t),this.focus(),this.insideGoTo=!1}goToField(e){this.insideGoTo=!0,e&&(this.prepareFieldAtElement(e),this.focus(),this.insideGoTo=!1)}focus(){this.fieldView?this.fieldView.focus():this.rootDiv.focus()}prepareFieldAtPosition(e,t){this.prepareFieldAtElement(this.getElementAt(e,t))}getElementAt(e,t){let o=this.bodyBody.children[t+1].children[e];if(!o)throw Error("fuck");return o}prepareFieldAtElement(e){if(void 0===e||"TD"!==e.tagName)return;let t=this.positionOfField(e);if(this.selectionModel)switch(this.selectionModel.mode){case l.TableEditMode.EDIT_CELL:this.selectionModel.value=t;break;case l.TableEditMode.SELECT_CELL:return this.toggleCellSelection(this.selectionModel.value,!1),this.selectionModel.value=t,void this.toggleCellSelection(this.selectionModel.value,!0);case l.TableEditMode.SELECT_ROW:return this.toggleRowSelection(this.selectionModel.value.row,!1),this.selectionModel.value.row=t.row,void this.toggleRowSelection(this.selectionModel.value.row,!0)}let o=this.model.getFieldView(t.col,t.row);if(!o)return;this.fieldView=o,o.classList.add("embedded");let i=this.model.getFieldModel(t.col,t.row);o.setModel(i),o.onblur=()=>{e.innerText!=i.value&&(e.innerText=i.value,this.unadjustInternalTables(t),setTimeout(()=>{this.adjustInternalTables()},0))},o.onkeydown=e=>{switch(e.key){case"ArrowDown":if(t.row+1>=this.model.rowCount)break;e.preventDefault(),this.goTo(t.col,t.row+1);break;case"ArrowUp":if(0===t.row)break;e.preventDefault(),this.goTo(t.col,t.row-1);break;case"Tab":e.shiftKey?t.col>0?(e.preventDefault(),this.goTo(t.col-1,t.row)):t.row>0&&(e.preventDefault(),this.goTo(this.model.colCount-1,t.row-1)):t.col+1<this.model.colCount?(e.preventDefault(),this.goTo(t.col+1,t.row)):t.row+1<this.model.rowCount&&(e.preventDefault(),this.goTo(0,t.row+1))}},0===this.inputDiv.children.length?this.inputDiv.appendChild(o):(document.hasFocus()&&document.activeElement===this&&this.inputDiv.children[0].dispatchEvent(new FocusEvent("blur")),this.inputDiv.replaceChild(o,this.inputDiv.children[0])),this.adjustInputToElement(e)}positionOfField(e){let t,o;for(t=0;t<this.model.colCount&&e.parentElement.children[t]!==e;++t);for(o=1;o<this.model.rowCount+1&&e.parentElement.parentElement.children[o]!==e.parentElement;++o);return--o,new l.TablePos(t,o)}}t.TableView=h,window.customElements.define("toad-table",h)},"./src/table/TypedTableModel.ts":
/*!**************************************!*\
  !*** ./src/table/TypedTableModel.ts ***!
  \**************************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedTableModel=void 0;const i=o(/*! ./TableModel */"./src/table/TableModel.ts");class n extends i.TableModel{constructor(e,t){super(),this.nodeClass=e}}t.TypedTableModel=n},"./src/table/table.ts":
/*!****************************!*\
  !*** ./src/table/table.ts ***!
  \****************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTableModel=t.registerTableModelLocator=t.registerTableAdapter=t.TablePos=t.TableEditMode=void 0;o(/*! ./TypedTableModel */"./src/table/TypedTableModel.ts");const i=o(/*! ./ArrayTableModel */"./src/table/ArrayTableModel.ts");!function(e){e[e.EDIT_CELL=0]="EDIT_CELL",e[e.SELECT_CELL=1]="SELECT_CELL",e[e.SELECT_ROW=2]="SELECT_ROW"}(t.TableEditMode||(t.TableEditMode={}));t.TablePos=class{constructor(e,t){this.col=e,this.row=t}};new Map;const n=new Map;t.registerTableAdapter=function(e,t,o){let i=n.get(t);if(void 0===i&&(i=new Map,n.set(t,i)),void 0!==i.get(o))throw Error("attempt to redefine existing table adapter");i.set(o,e)};let s=new Array;function r(e){s.push(e)}t.registerTableModelLocator=r,t.createTableModel=function(e){for(let t of s){let o=t(e);if(o)return o}throw new Error("findTableModel() failed to locate a table model")},r((function(e){if(e instanceof Array&&0!==e.length&&e[0]instanceof Array){for(let t of e[0])if("string"!=typeof t&&"number"!=typeof t)return;return new i.ArrayTableModel(e)}}))},"./src/table/tree.ts":
/*!***************************!*\
  !*** ./src/table/tree.ts ***!
  \***************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.myTreeTest=t.TreeNodeModel=t.TreeModel=t.TableEvent=t.TableEventType=void 0;const i=o(/*! ../toad */"./src/toad.ts"),n=o(/*! ./TypedTableModel */"./src/table/TypedTableModel.ts"),s=o(/*! ../svg */"./src/svg.ts");var r;!function(e){e[e.INSERT_ROW=0]="INSERT_ROW",e[e.REMOVED_ROW=1]="REMOVED_ROW",e[e.INSERT_COL=2]="INSERT_COL",e[e.REMOVED_COL=3]="REMOVED_COL",e[e.CONTENT=4]="CONTENT",e[e.RESIZED_ROW=5]="RESIZED_ROW",e[e.RESIZED_COL=6]="RESIZED_COL",e[e.CHANGED=7]="CHANGED"}(r=t.TableEventType||(t.TableEventType={}));class d{constructor(e,t,o){this.type=e,this.index=t,this.size=o}}t.TableEvent=d;class l extends n.TypedTableModel{constructor(e){super(e),this.rows=new Array}get colCount(){return 1}get rowCount(){return this.rows.length}addSiblingBefore(e){const t=this.createNode();return 0===this.rows.length?(e=0,this.setRoot(t),this.rows.push(new l.Row(t,0))):0===e?(this.setNext(t,this.getRoot()),this.setRoot(t),this.rows.unshift(new l.Row(t,0))):(this.setNext(t,this.rows[e].node),this.getNext(this.rows[e-1].node)===this.rows[e].node?this.setNext(this.rows[e-1].node,t):this.setDown(this.rows[e-1].node,t),this.rows.splice(e,0,new l.Row(t,this.rows[e].depth))),this.modified.trigger(new d(r.INSERT_ROW,e,1)),e}addSiblingAfter(e){const t=this.createNode();if(0===this.rows.length)e=0,this.setRoot(t),this.rows.push(new l.Row(t,0));else{this.setNext(t,this.getNext(this.rows[e].node)),this.setNext(this.rows[e].node,t);const o=this.nodeCount(this.getDown(this.rows[e].node)),i=this.rows[e].depth;e+=o+1,this.rows.splice(e,0,new l.Row(t,i))}return this.modified.trigger(new d(r.INSERT_ROW,e,1)),e}addChildAfter(e){const t=this.createNode();if(0===this.rows.length)this.setRoot(t),this.rows.push(new l.Row(t,0)),this.modified.trigger(new d(r.INSERT_ROW,0,1));else{const o=this.getDown(this.rows[e].node),i=this.nodeCount(o);for(let t=0;t<i;++t)++this.rows[e+1+t].depth;this.setDown(t,o),this.setDown(this.rows[e].node,t),this.rows.splice(e+1,0,new l.Row(t,this.rows[e].depth+1)),this.modified.trigger(new d(r.INSERT_ROW,e+1,1))}return e}addParentBefore(e){const t=this.createNode();if(0===e){for(let t=0;t<this.rows.length;++t)++this.rows[e+t].depth;this.setDown(t,this.getRoot()),this.setRoot(t),this.rows.unshift(new l.Row(t,0))}else{const o=this.rows[e].depth,i=this.nodeCount(this.getDown(this.rows[e].node))+1;for(let t=0;t<i;++t)++this.rows[e+t].depth;this.setDown(t,this.rows[e].node),this.setNext(t,this.getNext(this.rows[e].node)),this.setNext(this.rows[e].node,void 0),this.getNext(this.rows[e-1].node)===this.rows[e].node?this.setNext(this.rows[e-1].node,t):this.setDown(this.rows[e-1].node,t),this.rows.splice(e,0,new l.Row(t,o))}return this.modified.trigger(new d(r.INSERT_ROW,e,1)),e}deleteAt(e){let t=this.getDown(this.rows[e].node);if(void 0!==t){const o=this.nodeCount(t)+1;for(let t=0;t<o;++t)--this.rows[e+t].depth;this.append(t,this.getNext(this.rows[e].node)),this.setNext(this.rows[e].node,void 0),0===e?this.setRoot(t):this.setNext(this.rows[e-1].node,t)}else if(0===e){const t=this.getNext(this.rows[e].node);this.setNext(this.rows[e].node,void 0),this.setRoot(t)}else{const t=this.getNext(this.rows[e].node);this.setNext(this.rows[e].node,void 0),this.getNext(this.rows[e-1].node)===this.rows[e].node?this.setNext(this.rows[e-1].node,t):this.setDown(this.rows[e-1].node,t)}return this.rows.splice(e,1),this.modified.trigger(new d(r.REMOVED_ROW,e,1)),e}append(e,t){if(void 0===t)return;let o,i=e;for(;o=this.getNext(i),void 0!==o;)i=o;this.setNext(i,t)}nodeCount(e){return void 0===e?0:1+this.nodeCount(this.getDown(e))+this.nodeCount(this.getNext(e))}}t.TreeModel=l,function(e){e.Row=class{constructor(e,t){this.node=e,this.depth=t,this.open=!0}}}(l=t.TreeModel||(t.TreeModel={}));class a extends l{constructor(e,t){super(e),this.nodeClass=e,this.root=t}createNode(){return new this.nodeClass}deleteNode(e){}getRoot(){return this.root}setRoot(e){this.root=e}getDown(e){return e.down}setDown(e,t){e.down=t}getNext(e){return e.next}setNext(e,t){e.next=t}}t.TreeNodeModel=a;class c{constructor(e,t,o){this.label=void 0===e?"#"+c.counter++:e,this.next=t,this.down=o}print(e=0){console.log(`${"  ".repeat(e)} ${this.label}`),this.down&&this.down.print(e+1),this.next&&this.next.print(e)}}c.counter=0;const h=3.5,u=4.5;class p extends i.View{constructor(e,t){super(),this.model=e,this.row=t,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.create())}create(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.border="none",e.style.display="block",e.setAttributeNS("","width","70"),e.setAttributeNS("","height","20");const t=this.row.depth;let o;for(e.appendChild(s.text(12*t+h+12+5,12.5,this.row.node.label)),this.row.node.down?(e.appendChild(s.rectangle(12*t+h,u,8,8)),e.appendChild(s.line(12*t+h+2,8.5,12*t+h+8-2,8.5)),this.row.open||e.appendChild(s.line(12*t+h+4,6.5,12*t+h+4,10.5)),e.appendChild(s.line(12*t+h+8,8.5,12*t+h+8+3,8.5))):(e.appendChild(s.line(12*t+h+4,u,12*t+h+4,8.5)),e.appendChild(s.line(12*t+h+4,8.5,12*t+h+8+3,8.5))),e.appendChild(s.line(12*t+h+4,0,12*t+h+4,u)),o=0;this.model.rows[o]!==this.row;++o);for(let i=0;i<=t;++i)for(let n=o+1;n<this.model.rowCount&&!(this.model.rows[n].depth<i);++n)if(i===this.model.rows[n].depth){i!==t?e.appendChild(s.line(12*i+h+4,0,12*i+h+4,20)):o+1<this.model.rows.length&&this.model.rows[o+1].depth>this.row.depth?e.appendChild(s.line(12*i+h+4,12.5,12*i+h+4,20)):e.appendChild(s.line(12*i+h+4,8.5,12*i+h+4,20));break}return e}setModel(e){}}window.customElements.define("toad-treenode",p);class m extends i.Model{}class b extends a{getFieldModel(e,t){if(e<0||e>=this.colCount||t<0||t>=this.rowCount)throw Error(`MyTreeModel.getFieldModel(${e}, ${t}) is out of range`);return new m}getFieldView(e,t){return new p(this,this.rows[t])}}t.myTreeTest=function(){let e=new b(c);e.addSiblingAfter(0),e.addChildAfter(0),e.addChildAfter(1),e.addSiblingAfter(1),e.addSiblingAfter(0),i.bind("books",e)}},"./src/toad.ts":
/*!*********************!*\
  !*** ./src/toad.ts ***!
  \*********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(/*! ./view */"./src/view.ts");var n=o(/*! ./matrix */"./src/matrix.ts");Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return n.Matrix}});var s=o(/*! ./signal */"./src/signal.ts");Object.defineProperty(t,"Signal",{enumerable:!0,get:function(){return s.Signal}});var r=o(/*! ./action */"./src/action.ts");Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return r.Action}});var d=o(/*! ./model */"./src/model.ts");Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return d.Model}}),Object.defineProperty(t,"GenericModel",{enumerable:!0,get:function(){return d.GenericModel}}),Object.defineProperty(t,"TextModel",{enumerable:!0,get:function(){return d.TextModel}}),Object.defineProperty(t,"HtmlModel",{enumerable:!0,get:function(){return d.HtmlModel}}),Object.defineProperty(t,"NumberModel",{enumerable:!0,get:function(){return d.NumberModel}}),Object.defineProperty(t,"BooleanModel",{enumerable:!0,get:function(){return d.BooleanModel}}),Object.defineProperty(t,"OptionModel",{enumerable:!0,get:function(){return d.OptionModel}}),Object.defineProperty(t,"OptionModelBase",{enumerable:!0,get:function(){return d.OptionModelBase}});var l=o(/*! ./view */"./src/view.ts");Object.defineProperty(t,"View",{enumerable:!0,get:function(){return l.View}}),Object.defineProperty(t,"GenericView",{enumerable:!0,get:function(){return l.GenericView}}),Object.defineProperty(t,"ActionView",{enumerable:!0,get:function(){return l.ActionView}}),Object.defineProperty(t,"SlotView",{enumerable:!0,get:function(){return l.SlotView}});var a=o(/*! ./view/button */"./src/view/button.ts");Object.defineProperty(t,"ButtonView",{enumerable:!0,get:function(){return a.ButtonView}});var c=o(/*! ./view/toolbutton */"./src/view/toolbutton.ts");Object.defineProperty(t,"ToolButton",{enumerable:!0,get:function(){return c.ToolButton}});var h=o(/*! ./view/checkbox */"./src/view/checkbox.ts");Object.defineProperty(t,"CheckboxView",{enumerable:!0,get:function(){return h.CheckboxView}});var u=o(/*! ./view/menu */"./src/view/menu.ts");Object.defineProperty(t,"MenuButton",{enumerable:!0,get:function(){return u.MenuButton}});var p=o(/*! ./view/slider */"./src/view/slider.ts");Object.defineProperty(t,"SliderView",{enumerable:!0,get:function(){return p.SliderView}});var m=o(/*! ./table/table */"./src/table/table.ts");Object.defineProperty(t,"TableEditMode",{enumerable:!0,get:function(){return m.TableEditMode}}),Object.defineProperty(t,"registerTableModelLocator",{enumerable:!0,get:function(){return m.registerTableModelLocator}}),Object.defineProperty(t,"createTableModel",{enumerable:!0,get:function(){return m.createTableModel}});var b=o(/*! ./table/tree */"./src/table/tree.ts");Object.defineProperty(t,"TableEventType",{enumerable:!0,get:function(){return b.TableEventType}}),Object.defineProperty(t,"TableEvent",{enumerable:!0,get:function(){return b.TableEvent}}),Object.defineProperty(t,"TreeModel",{enumerable:!0,get:function(){return b.TreeModel}}),Object.defineProperty(t,"TreeNodeModel",{enumerable:!0,get:function(){return b.TreeNodeModel}}),Object.defineProperty(t,"myTreeTest",{enumerable:!0,get:function(){return b.myTreeTest}});var f=o(/*! ./table/TableView */"./src/table/TableView.ts");Object.defineProperty(t,"TableView",{enumerable:!0,get:function(){return f.TableView}});var w=o(/*! ./table/TableModel */"./src/table/TableModel.ts");Object.defineProperty(t,"TableModel",{enumerable:!0,get:function(){return w.TableModel}});var g=o(/*! ./table/SelectionModel */"./src/table/SelectionModel.ts");Object.defineProperty(t,"SelectionModel",{enumerable:!0,get:function(){return g.SelectionModel}});var v=o(/*! ./view/text */"./src/view/text.ts");Object.defineProperty(t,"TextView",{enumerable:!0,get:function(){return v.TextView}});var y=o(/*! ./view/textarea */"./src/view/textarea.ts");Object.defineProperty(t,"TextArea",{enumerable:!0,get:function(){return y.TextArea}}),Object.defineProperty(t,"TextTool",{enumerable:!0,get:function(){return y.TextTool}});var x=o(/*! ./controller */"./src/controller.ts");Object.defineProperty(t,"Controller",{enumerable:!0,get:function(){return x.Controller}}),Object.defineProperty(t,"Template",{enumerable:!0,get:function(){return x.Template}}),Object.defineProperty(t,"Dialog",{enumerable:!0,get:function(){return x.Dialog}}),Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return x.bind}}),Object.defineProperty(t,"action",{enumerable:!0,get:function(){return x.action}}),Object.defineProperty(t,"unbind",{enumerable:!0,get:function(){return x.unbind}}),Object.defineProperty(t,"globalController",{enumerable:!0,get:function(){return x.globalController}}),Object.defineProperty(t,"boolean",{enumerable:!0,get:function(){return x.boolean}});class M extends i.GenericView{updateModel(){}updateView(){this.model&&(this.style.display=this.model.value?"":"none")}}customElements.define("toad-if",M)},"./src/view.ts":
/*!*********************!*\
  !*** ./src/view.ts ***!
  \*********************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlotView=t.ActionView=t.GenericView=t.View=void 0;const i=o(/*! ./model */"./src/model.ts"),n=o(/*! ./controller */"./src/controller.ts"),s=o(/*! ./action */"./src/action.ts");class r extends HTMLElement{getModelId(){if(!this.hasAttribute("model"))throw Error("no 'model' attribute");let e=this.getAttribute("model");if(!e)throw Error("no model id");return"M:"+e}getActionId(){if(!this.hasAttribute("action"))throw Error("no 'action' attribute");let e=this.getAttribute("action");if(!e)throw Error("no action id");return"A:"+e}}t.View=r;class d extends r{constructor(){super()}connectedCallback(){if(this.controller)return;let e="";try{e=this.getModelId()}catch(e){}""!=e&&n.globalController.registerView(e,this)}disconnectedCallback(){this.controller&&this.controller.unregisterView(this)}setModel(e){if(e===this.model)return;let t=this;this.model&&this.model.modified.remove(t),e&&e.modified.add(e=>{t.updateView(e)},t),this.model=e,this.updateView()}}t.GenericView=d;t.ActionView=class extends d{constructor(){super()}connectedCallback(){if(this.controller)this.updateView();else{try{n.globalController.registerView(this.getActionId(),this)}catch(e){}try{n.globalController.registerView(this.getModelId(),this)}catch(e){}this.updateView()}}disconnectedCallback(){super.disconnectedCallback(),this.controller&&this.controller.unregisterView(this)}setModel(e){if(!e)return this.model&&this.model.modified.remove(this),this.action&&this.action.modified.remove(this),this.model=void 0,this.action=void 0,void this.updateView();if(e instanceof s.Action)this.action=e,this.action.modified.add(()=>{this.updateView()},this);else{if(!(e instanceof i.TextModel))throw Error("unexpected model of type "+e.constructor.name);this.model=e,this.model.modified.add(()=>{this.updateView()},this)}this.updateView()}isEnabled(){return void 0!==this.action&&this.action.enabled}};class l extends d{constructor(){super()}updateModel(){}updateView(){if(!this.model)return;let e=void 0===this.model.value?"":this.model.value;this.model instanceof i.HtmlModel?this.innerHTML=e:this.innerText=e}}t.SlotView=l,window.customElements.define("toad-slot",l)},"./src/view/button.ts":
/*!****************************!*\
  !*** ./src/view/button.ts ***!
  \****************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonView=void 0;const i=o(/*! ../model */"./src/model.ts"),n=o(/*! ../view */"./src/view.ts");let s=document.createElement("style");s.textContent="\n  button {\n    border: none;\n    background-color: var(--toad-primary-color, #0052cc);\n    color: #ffffff;\n    border-radius: 3px;\n    font-size: 14px;\n    font-weight: bold;\n    height: 32px;\n    line-height: 32px;\n    min-width: 24px;\n    text-shadow: none;\n    padding: 0 10px;\n    margin-right: 4px;\n  }\n  \n  button:hover {\n    background-color: #0065ff;\n  }\n  \n  button:hover:active {\n    background-color: #0049b0;\n  }\n  \n  button:disabled, button:disabled:active {\n    background-color: #888;\n  }\n";class r extends n.ActionView{constructor(){super();this.button=document.createElement("button"),this.button.onclick=()=>{this.action&&this.action.trigger()},this.button.disabled=!0,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(s,!0)),this.shadowRoot.appendChild(this.button)}connectedCallback(){super.connectedCallback(),0===this.children.length&&(this._observer=new MutationObserver((e,t)=>{void 0!==this._timer&&clearTimeout(this._timer),this._timer=window.setTimeout(()=>{this._timer=void 0,this.updateView()},100)}),this._observer.observe(this,{childList:!0,subtree:!0,characterData:!0}))}updateModel(){}updateView(){this.model&&this.model.value?this.model instanceof i.HtmlModel?this.button.innerHTML=this.model.value:this.button.innerText=this.model.value:this.button.innerHTML=this.innerHTML,this.button.disabled=!this.isEnabled()}}t.ButtonView=r,window.customElements.define("toad-button",r)},"./src/view/checkbox.ts":
/*!******************************!*\
  !*** ./src/view/checkbox.ts ***!
  \******************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxView=void 0;const i=o(/*! ../view */"./src/view.ts");let n=document.createElement("style");n.textContent="\nsvg {\n  width: 12px;\n  height: 12px;\n  vertical-align: middle;\n  margin: 3px;              /* space for the outline */\n  background: none;\n}\nsvg:focus {\n  outline-offset: -2px;     /* bring outline in touch with the svg */\n  background: #9eccfb;      /* the rectangle is rounded, fill the corners */\n  outline-color: 9eccfb;    /* outline shall be the same color used to fill the corners */\n}\n@media(pointer: coarse) { /* works on Chrome but iOS is never coarse :( */\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n}\nsvg rect {\n  stroke: var(--border-color, var(--toad-neutral-color, #aaa));\n  fill: var(--background-color, #fff);\n  stroke-width: 1px;\n}\nsvg path {\n  stroke: var(--marker-color, none);\n  fill: none;\n  stroke-width: 2px;\n}\n:host([checked]) svg rect {\n  stroke: var(--checked-border-color, var(--toad-primary-color, #0052cc));\n  fill: var(--checked-background-color, var(--toad-primary-color, #0052cc));\n}\n:host([checked]) svg path {\n  stroke: var(--checked-marker-color, var(--toad-light-color, #fff));\n}\n:host([disabled]) svg rect {\n  stroke: var(--checked-border-color, var(--toad-primary-color, #bdbdbd));\n  fill: var(--checked-background-color, var(--toad-primary-color, #fff));\n}\n:host([disabled]) svg path {\n  stroke: var(--checked-marker-color, var(--toad-light-color, none));\n}\n:host([checked][disabled]) svg path {\n  stroke: var(--checked-marker-color, var(--toad-light-color, #bdbdbd));\n}";class s extends i.GenericView{constructor(){super();let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS("","viewBox","0 0 18 18");let t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttributeNS("","x","1"),t.setAttributeNS("","y","1"),t.setAttributeNS("","width","16"),t.setAttributeNS("","height","16"),t.setAttributeNS("","rx","3"),t.setAttributeNS("","ry","3");let o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttributeNS("","d","M4 9.5 L 7.5 13 L 14.5 4"),e.onclick=()=>{this.toggle()},e.setAttributeNS("","tabindex","0"),e.addEventListener("keydown",e=>{" "===e.key&&this.toggle()}),e.onmousedown=t=>{e.focus(),t.preventDefault()},e.appendChild(t),e.appendChild(o),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(n,!0)),this.shadowRoot.appendChild(e)}static get observedAttributes(){return["checked"]}attributeChangedCallback(e,t,o){switch(e){case"checked":this.updateModel()}}toggle(){this.hasAttribute("disabled")||(this.hasAttribute("checked")?this.removeAttribute("checked"):this.setAttribute("checked",""),this.updateModel())}updateModel(){this.model&&(this.model.value=this.hasAttribute("checked"))}updateView(){if(!this.model)return this.setAttribute("disabled",""),void this.removeAttribute("checked");this.removeAttribute("disabled"),this.model.value?this.setAttribute("checked",""):this.removeAttribute("checked")}}t.CheckboxView=s,window.customElements.define("toad-checkbox",s)},"./src/view/menu.ts":
/*!**************************!*\
  !*** ./src/view/menu.ts ***!
  \**************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuButton=t.PopupMenu=t.Menu=t.MenuHelper=t.Node=t.Type=t.MenuState=void 0;const i=o(/*! ../dom */"./src/dom.ts"),n=o(/*! ../action */"./src/action.ts"),s=o(/*! ../model */"./src/model.ts"),r=o(/*! ../view */"./src/view.ts"),d=o(/*! ../controller */"./src/controller.ts");let l=document.createElement("style");var a;l.textContent="\n  :host(.menu-button) {\n    font-family: var(--toad-font-family, sans-serif);\n    font-size: 14px;\n    font-weight: bold;\n    padding: 7px;\n    vertical-align: center;\n  \n    background: #fff;\n    color: #000;\n    cursor: default;\n  }\n  :host(.menu-button.active) {\n    background: #000;\n    color: #fff;\n  }\n  :host(.menu-button.disabled) {\n    color: #888;\n  }\n  :host(.menu-button.active.disabled) {\n    color: #888;\n  }\n  :host(.menu-button.menu-down) {\n    padding-right: 20px;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='15' height='14'><path d='M 0 4 l 10 0 l -5 5 Z' fill='#000' stroke='none'/></svg>\");\n    background-repeat: no-repeat;\n    background-position: right center;\n  }\n  :host(.menu-button.active.menu-down) {\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='15' height='14'><path d='M 0 4 l 10 0 l -5 5 Z' fill='#fff' stroke='none'/></svg>\");\n    background-repeat: no-repeat;\n    background-position: right center;\n  }\n  :host(.menu-button.menu-side) {\n    padding-right: 20px;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='15' height='14'><path d='M 0 2 l 0 10 l 5 -5 Z' fill='#000' stroke='none'/></svg>\");\n    background-repeat: no-repeat;\n    background-position: right center;\n  }\n  :host(.menu-button.active.menu-side) {\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='15' height='14'><path d='M 0 2 l 0 10 l 5 -5 Z' fill='#fff' stroke='none'/></svg>\");\n    background-repeat: no-repeat;\n    background-position: right center;\n  }\n  .menu-bar {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n  }\n  .menu-popup {\n    position: fixed;\n    display: flex;\n    flex-direction: column;\n    box-shadow: 2px 2px 5px #888;\n  }\n",function(e){e[e.WAIT=0]="WAIT",e[e.DOWN=1]="DOWN",e[e.UP_N_HOLD=2]="UP_N_HOLD",e[e.DOWN_N_HOLD=3]="DOWN_N_HOLD",e[e.DOWN_N_OUTSIDE=4]="DOWN_N_OUTSIDE",e[e.DOWN_N_INSIDE_AGAIN=5]="DOWN_N_INSIDE_AGAIN"}(a=t.MenuState||(t.MenuState={})),function(e){e[e.BUTTON=0]="BUTTON",e[e.RADIOBUTTON=1]="RADIOBUTTON",e[e.CHECKBUTTON=2]="CHECKBUTTON",e[e.SEPARATOR=3]="SEPARATOR"}(t.Type||(t.Type={}));class c{constructor(e,t,o,i,n){this.title=e,this.label=t,this.shortcut=o,this.type=i||"entry",this.modelId=n}isEnabled(){return!0}isAvailable(){return!0}createWindowAt(e,t){if("spacer"==this.type){let e=document.createElement("span");return e.style.flexGrow="1",void t.appendChild(e)}this.view=new f(e,this),t.appendChild(this.view)}deleteWindow(){}}t.Node=c;class h extends HTMLElement{constructor(){super(),this.vertical=!0,this.closeOnClose=!1,this.state=a.WAIT}}t.MenuHelper=h;class u extends h{constructor(){super(),this.vertical=!1,this.root=new c("","",void 0,void 0)}connectedCallback(){this.tabIndex=0,0===this.children.length?(this._observer=new MutationObserver((e,t)=>{void 0!==this._timer&&clearTimeout(this._timer),this._timer=window.setTimeout(()=>{this._timer=void 0,this.layout2nodes(this.children,this.root),this.referenceActions(),this.createShadowDOM()},100)}),this._observer.observe(this,{childList:!0,subtree:!0})):(this.layout2nodes(this.children,this.root),this.referenceActions(),this.createShadowDOM())}disconnectedCallback(){}layout2nodes(e,t){let o=t.down;for(let n of e){let e=void 0;switch(n.nodeName){case"TOAD-MENUSPACER":e=new c("","","","spacer");break;case"TOAD-MENUENTRY":e=new c(i.attribute(n,"name"),i.attribute(n,"label"),i.attributeOrUndefined(n,"shortcut"),i.attributeOrUndefined(n,"type"),i.attributeOrUndefined(n,"model"))}if(e&&(e.parent=t,o?o.next=e:t.down=e,o=e),!o)throw Error("fuck");this.layout2nodes(n.children,o)}}referenceActions(){}findNode(e,t){let o=e.indexOf("|"),i=-1==o?e:e.substr(0,o),n=-1==o?"":e.substr(o+1);t||(t=this.root);for(let e=t.down;e;e=e.next)if(e.title==i)return e.down?this.findNode(n,e):e}createShadowDOM(){this.view=document.createElement("div"),this.view.classList.add("menu-bar");let e=this.root.down;for(;e;)e.isAvailable()?e.createWindowAt(this,this.view):e.deleteWindow(),e=e.next;this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(l,!0)),this.shadowRoot.appendChild(this.view)}}t.Menu=u,window.customElements.define("toad-menu",u);class p extends HTMLElement{}window.customElements.define("toad-menuentry",p);class m extends HTMLElement{}window.customElements.define("toad-menuspacer",m);class b extends h{constructor(e,t){super(),this.vertical=!0,this.root=e,this.parentButton=t,this.popup=document.createElement("div"),this.popup.classList.add("menu-popup");let o=e.down;for(;o;)o.isAvailable()?o.createWindowAt(this,this.popup):o.deleteWindow(),o=o.next;this.appendChild(this.popup),this.show()}show(){this.parentButton.master.vertical?function(e,t){let o=e.getBoundingClientRect();t.style.opacity="0",t.style.left=o.left+o.width+"px",t.style.top=o.top+"px",setTimeout((function(){let e=t.getBoundingClientRect();o.top+e.height>window.innerHeight&&(t.style.top=o.top+o.height-e.height+"px"),o.left+o.width+e.width>window.innerWidth&&(t.style.left=o.left-e.width+"px"),t.style.opacity="1"}),0)}(this.parentButton,this.popup):function(e,t){let o=e.getBoundingClientRect();t.style.opacity="0",t.style.left=o.left+"px",t.style.top=o.top+o.height+"px",setTimeout((function(){let e=t.getBoundingClientRect();o.top+o.height+e.height>window.innerHeight&&(t.style.top=o.top-e.height+"px"),o.left+e.width>window.innerWidth&&(t.style.left=o.left+o.width-e.width+"px"),t.style.opacity="1"}),0)}(this.parentButton,this.popup),this.style.display=""}hide(){this.style.display="none"}}t.PopupMenu=b,window.customElements.define("toad-popupmenu",b);class f extends r.GenericView{constructor(e,t){super(),this.master=e,this.node=t;let o=this;if(this.classList.add("menu-button"),t.down&&(e.vertical?this.classList.add("menu-side"):this.classList.add("menu-down")),this.updateView(),this.onmousedown=e=>{e.stopPropagation();let t=function(e){document.removeEventListener("mouseup",t,{capture:!0}),e.preventDefault(),setTimeout(()=>{f.buttonDown&&o.dispatchEvent(new MouseEvent("mouseup",e))},0)};if(document.addEventListener("mouseup",t,{capture:!0}),f.buttonDown=!0,!this.master)throw Error("fuck");switch(this.master.state){case a.WAIT:this.master.state=a.DOWN,this.activate();break;case a.UP_N_HOLD:this.master.active!==this?(this.master.state=a.DOWN,this.activate()):this.master.state=a.DOWN_N_HOLD;break;default:throw Error("unexpected state "+this.master.state)}return!1},this.onmouseup=e=>{if(e.stopPropagation(),f.buttonDown){if(f.buttonDown=!1,!this.master)throw Error("fuck");if(!this.node)throw Error("fuck");switch(this.master.state){case a.DOWN:this.node.isEnabled()&&!this.node.down?(this.trigger(),this.master.state=a.WAIT):(this.master.state=a.UP_N_HOLD,f.documentMouseDown&&document.removeEventListener("mousedown",f.documentMouseDown,{capture:!1}),f.documentMouseDown=function(e){f.documentMouseDown&&document.removeEventListener("mousedown",f.documentMouseDown,{capture:!1}),f.documentMouseDown=void 0,"TOAD-MENUBUTTON"!==e.target.tagName&&o.collapse()},document.addEventListener("mousedown",f.documentMouseDown,{capture:!1}));break;case a.DOWN_N_HOLD:case a.DOWN_N_OUTSIDE:this.master.state=a.WAIT,this.deactivate(),this.collapse(),this.master.closeOnClose;break;case a.DOWN_N_INSIDE_AGAIN:this.trigger();break;default:throw Error("unexpected state "+this.master.state)}return!1}},this.onmouseout=e=>{if(e.stopPropagation(),!this.master)throw Error("fuck");switch(f.inside=void 0,this.master.state){case a.WAIT:case a.DOWN_N_OUTSIDE:case a.UP_N_HOLD:case a.DOWN_N_HOLD:break;case a.DOWN:case a.DOWN_N_INSIDE_AGAIN:this.master.state=a.DOWN_N_OUTSIDE,this.updateView();break;default:throw Error("unexpected state")}return!1},this.onmouseover=e=>{if(e.stopPropagation(),!o.master)throw Error("fuck");switch(f.inside=o,o.master.state){case a.WAIT:case a.UP_N_HOLD:case a.DOWN_N_OUTSIDE:case a.DOWN_N_HOLD:case a.DOWN:case a.DOWN_N_INSIDE_AGAIN:if(!f.buttonDown)break;if(!this.master)throw Error("fuck");this.master.active&&this.master.active.deactivate(),this.master.state=a.DOWN_N_INSIDE_AGAIN,this.activate();break;default:throw Error("unexpected state "+o.master.state)}return!1},this.attachShadow({mode:"open"}),!this.shadowRoot)throw Error("fuck");this.shadowRoot.appendChild(document.importNode(l,!0)),this.node.modelId||this.shadowRoot.appendChild(document.createTextNode(t.label))}connectedCallback(){if(!this.controller){if(void 0===this.node.down){let e=this.node.title;for(let t=this.node.parent;t&&t.title.length;t=t.parent)e=t.title+"|"+e;e="A:"+e,d.globalController.registerView(e,this)}if(void 0!==this.node.modelId){let e="M:"+this.node.modelId;d.globalController.registerView(e,this)}}}disconnectedCallback(){this.controller&&this.controller.unregisterView(this)}setModel(e){if(!e)return this.action&&this.action.modified.remove(this),this.model=void 0,this.action=void 0,void this.updateView();if(e instanceof n.Action)this.action=e,this.action.modified.add(()=>{this.updateView()},this);else{if(!(e instanceof s.TextModel))throw Error("unexpected model of type "+e.constructor.name);this.model=e}this.updateView()}updateModel(){}updateView(){if(this.model&&this.model.value){if(!this.shadowRoot)throw Error("fuck");let e=document.createElement("span");this.model instanceof s.HtmlModel?e.innerHTML=this.model.value:e.innerText=this.model.value,this.shadowRoot.children.length>1&&this.shadowRoot.removeChild(this.shadowRoot.children[1]),this.shadowRoot.children.length>1?this.shadowRoot.insertBefore(e,this.shadowRoot.children[1]):this.shadowRoot.appendChild(e)}if(!this.master)throw Error("fuck");let e=!1;if(this.master.active==this)switch(this.master.state){case a.DOWN:case a.UP_N_HOLD:case a.DOWN_N_HOLD:case a.DOWN_N_INSIDE_AGAIN:e=!0;break;case a.DOWN_N_OUTSIDE:if(!this.node)throw Error("fuck");e=void 0!==this.node.down&&this.node.isEnabled()}this.classList.toggle("active",e),this.classList.toggle("disabled",!this.isEnabled())}isEnabled(){return void 0!==this.node.down||void 0!==this.action&&this.action.enabled}trigger(){this.collapse(),this.action&&this.action.trigger()}collapse(){if(!this.master)throw Error("fuck");this.master.parentButton?this.master.parentButton.collapse():this.deactivate()}openPopup(){if(this.node&&this.node.down){if(!this.shadowRoot)throw Error("fuck");this.popup?this.popup.show():(this.popup=new b(this.node,this),this.shadowRoot.appendChild(this.popup))}}closePopup(){this.popup&&(this.popup.active&&this.popup.active.deactivate(),this.popup.hide())}activate(){if(!this.master)throw Error("fuck");if(!this.node)throw Error("fuck");let e=this.master.active;this.master.active=this,e&&e!==this&&(e.closePopup(),e.updateView()),this.updateView(),this.openPopup()}deactivate(){if(!this.master)throw Error("fuck");this.master.active===this&&(this.master.active.closePopup(),this.master.active=void 0,this.master.state=a.WAIT,this.updateView())}}t.MenuButton=f,window.customElements.define("toad-menubutton",f)},"./src/view/slider.ts":
/*!****************************!*\
  !*** ./src/view/slider.ts ***!
  \****************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderView=void 0;const i=o(/*! ../view */"./src/view.ts");class n extends i.GenericView{constructor(){super(),this.input=document.createElement("input"),this.input.type="range";let e=this;this.input.oninput=()=>{e.updateModel()},this.attachShadow({mode:"open"}).appendChild(this.input)}updateModel(){this.model&&(this.model.value=Number.parseFloat(this.input.value))}updateView(){this.model&&(this.input.step=String(this.model.step),this.input.min=String(this.model.min),this.input.max=String(this.model.max),this.input.value=String(this.model.value))}}t.SliderView=n,window.customElements.define("toad-slider",n)},"./src/view/text.ts":
/*!**************************!*\
  !*** ./src/view/text.ts ***!
  \**************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextView=void 0;const i=o(/*! ../view */"./src/view.ts");let n=document.createElement("style");n.textContent="\ninput {\n/*\n  height: 2.14285714em;\n  line-height: 1.4285714285714;\n  padding: 4px 5px;\n  border: 1px #ccc solid;\n  border-radius: 3px;\n  box-sizing: border-box;\n  margin: 2px;\n  max-width: 250px;\n  vertical-align: baseline;\n  width: 100%;\n  background-color: #fff;\n  color: #333;\n  font-size: 14px;\n*/\n  font-family: var(--toad-font-family, sans-serif);\n  font-size: var(--toad-font-size, 12px);\n  border: 1px #ccc solid;\n  border-radius: 3px;\n  margin: 2px;\n  padding: 4px 5px;\n}\n\n:host(.embedded) input {\n  border: none 0;\n  border-radius: 0;\n  padding: 0;\n  margin: 2px;\n  width: 100%;\n  background: #fff;\n}\n";class s extends i.GenericView{constructor(){super(),this.input=document.createElement("input"),this.input.oninput=()=>{this.updateModel()},this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(n,!0)),this.shadowRoot.appendChild(this.input)}focus(){this.input.focus()}blur(){this.input.blur()}static get observedAttributes(){return["value"]}attributeChangedCallback(e,t,o){switch(e){case"value":this.model&&void 0!==o&&(this.model.value=o)}}updateModel(){this.model&&(this.model.value=this.input.value),this.setAttribute("value",this.input.value)}updateView(){this.model&&this.input.value!=this.model.value&&(this.input.value=this.model.value),this.setAttribute("value",this.input.value)}get value(){return this.input.value}set value(e){this.input.value=e,this.updateModel()}}t.TextView=s,window.customElements.define("toad-text",s)},"./src/view/textarea.ts":
/*!******************************!*\
  !*** ./src/view/textarea.ts ***!
  \******************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextArea=t.TextTool=void 0;const i=o(/*! ../model */"./src/model.ts"),n=o(/*! ../view */"./src/view.ts");let s=document.createElement("style");s.textContent="\n.toolbar button {\n    background: #fff;\n    color: #000;\n    border: 1px #ccc;\n    border-style: solid solid solid none;\n    padding: 5;\n    margin: 0;\n}\n\n.toolbar button.left {\n    border-style: solid;\n    border-radius: 3px 0 0 3px;\n}\n\n.toolbar button.right {\n    border: 1px #ccc;\n    border-style: solid solid solid none;\n    border-radius: 0 3px 3px 0;\n}\n\n.toolbar button.active {\n    background: linear-gradient(to bottom, #7abcff 0%,#0052cc 100%,#4096ee 100%);\n    border: 1px #0052cc solid;\n    color: #fff;\n}\n\ndiv.textarea {\n  font-family: var(--toad-font-family, sans-serif);\n  font-size: var(--toad-font-size, 12px);\n  border: 1px #ccc solid;\n  border-radius: 3px;\n  margin: 2px;\n  padding: 4px 5px;\n  outline-offset: -2px;\n}\n\ndiv.textarea h1 {\n  font-size: 22px;\n  margin: 0;\n  padding: 4px 0 4px 0;\n}\n\ndiv.textarea h2 {\n  font-size: 18px;\n  margin: 0;\n  padding: 4px 0 4px 0;\n}\n\ndiv.textarea h3 {\n  font-size: 16px;\n  margin: 0;\n  padding: 4px 0 4px 0;\n}\n\ndiv.textarea h4 {\n  font-size: 14px;\n  margin: 0;\n  padding: 4px 0 4px 0;\n}\n\ndiv.textarea div {\n  padding: 2px 0 2px 0;\n}\n";class r extends n.GenericView{constructor(){super(),r.texttool=this;let e=document.createElement("div");e.classList.add("toolbar"),this.buttonH1=document.createElement("button"),this.buttonH1.classList.add("left"),this.buttonH1.innerHTML="H1",this.buttonH1.onclick=()=>{document.execCommand("formatBlock",!1,"<h1>"),this.update()},e.appendChild(this.buttonH1),this.buttonH2=document.createElement("button"),this.buttonH2.innerHTML="H2",this.buttonH2.onclick=()=>{document.execCommand("formatBlock",!1,"<h2>"),this.update()},e.appendChild(this.buttonH2),this.buttonH3=document.createElement("button"),this.buttonH3.innerHTML="H3",this.buttonH3.onclick=()=>{document.execCommand("formatBlock",!1,"<h3>"),this.update()},e.appendChild(this.buttonH3),this.buttonH4=document.createElement("button"),this.buttonH4.classList.add("right"),this.buttonH4.innerHTML="H4",this.buttonH4.onclick=()=>{document.execCommand("formatBlock",!1,"<h4>"),this.update()},e.appendChild(this.buttonH4),e.appendChild(document.createTextNode(" ")),this.buttonBold=document.createElement("button"),this.buttonBold.classList.add("left"),this.buttonBold.innerHTML="<b>B</b>",this.buttonBold.onclick=()=>{document.execCommand("bold",!1),this.update()},e.appendChild(this.buttonBold),this.buttonItalic=document.createElement("button"),this.buttonItalic.innerHTML="<i>I</i>",this.buttonItalic.onclick=()=>{document.execCommand("italic",!1),this.update()},e.appendChild(this.buttonItalic),this.buttonUnderline=document.createElement("button"),this.buttonUnderline.innerHTML="<u>U</u>",this.buttonUnderline.onclick=()=>{document.execCommand("underline",!1),this.update()},e.appendChild(this.buttonUnderline),this.buttonStrikeThrough=document.createElement("button"),this.buttonStrikeThrough.innerHTML="<strike>S</strike>",this.buttonStrikeThrough.onclick=()=>{document.execCommand("strikeThrough",!1),this.update()},e.appendChild(this.buttonStrikeThrough),this.buttonSubscript=document.createElement("button"),this.buttonSubscript.innerHTML="x₂",this.buttonSubscript.onclick=()=>{document.execCommand("subscript",!1),this.update()},e.appendChild(this.buttonSubscript),this.buttonSuperscript=document.createElement("button"),this.buttonSuperscript.classList.add("right"),this.buttonSuperscript.innerHTML="x²",this.buttonSuperscript.onclick=()=>{document.execCommand("superscript",!1),this.update()},e.appendChild(this.buttonSuperscript),e.appendChild(document.createTextNode(" ")),this.buttonJustifyLeft=document.createElement("button"),this.buttonJustifyLeft.classList.add("left"),this.buttonJustifyLeft.innerHTML='<svg viewBox="0 0 10 9" width="10" height="9">\n            <line x1="0" y1="0.5" x2="10" y2="0.5" stroke="#000" />\n            <line x1="0" y1="2.5" x2="6" y2="2.5" stroke="#000" />\n            <line x1="0" y1="4.5" x2="10" y2="4.5" stroke="#000" />\n            <line x1="0" y1="6.5" x2="6" y2="6.5" stroke="#000" />\n            <line x1="0" y1="8.5" x2="10" y2="8.5" stroke="#000" />\n            </svg>',this.buttonJustifyLeft.onclick=()=>{document.execCommand("justifyLeft",!1),this.update()},e.appendChild(this.buttonJustifyLeft),this.buttonJustifyCenter=document.createElement("button"),this.buttonJustifyCenter.innerHTML='<svg viewBox="0 0 10 9" width="10" height="9">\n            <line x1="0" y1="0.5" x2="10" y2="0.5" stroke="#000" />\n            <line x1="2" y1="2.5" x2="8" y2="2.5" stroke="#000" />\n            <line x1="0" y1="4.5" x2="10" y2="4.5" stroke="#000" />\n            <line x1="2" y1="6.5" x2="8" y2="6.5" stroke="#000" />\n            <line x1="0" y1="8.5" x2="10" y2="8.5" stroke="#000" />\n            </svg>',this.buttonJustifyCenter.onclick=()=>{document.execCommand("justifyCenter",!1),this.update()},e.appendChild(this.buttonJustifyCenter),this.buttonJustifyRight=document.createElement("button"),this.buttonJustifyRight.classList.add("right"),this.buttonJustifyRight.innerHTML='<svg viewBox="0 0 10 9" width="10" height="9">\n            <line x1="0" y1="0.5" x2="10" y2="0.5" stroke="#000" />\n            <line x1="4" y1="2.5" x2="10" y2="2.5" stroke="#000" />\n            <line x1="0" y1="4.5" x2="10" y2="4.5" stroke="#000" />\n            <line x1="4" y1="6.5" x2="10" y2="6.5" stroke="#000" />\n            <line x1="0" y1="8.5" x2="10" y2="8.5" stroke="#000" />\n            </svg>',this.buttonJustifyRight.onclick=()=>{document.execCommand("justifyRight",!1),this.update()},e.appendChild(this.buttonJustifyRight),e.appendChild(document.createTextNode(" ")),this.buttonUnorderedList=document.createElement("button"),this.buttonUnorderedList.classList.add("left"),this.buttonUnorderedList.innerHTML='<svg viewBox="0 0 17 10.5" width="17" height="10.5">\n            <circle cx="4.5" cy="1.5" r="0.8" stroke="#000" fill="#000"/>\n            <line x1="7" y1="1.5" x2="17" y2="1.5" stroke="#000"/>\n            <circle cx="4.5" cy="5.5" r="0.8" stroke="#000" fill="#000"/>\n            <line x1="7" y1="5.5" x2="17" y2="5.5" stroke="#000"/>\n            <circle cx="4.5" cy="9.5" r="0.8" stroke="#000" fill="#000"/>\n            <line x1="7" y1="9.5" x2="17" y2="9.5" stroke="#000"/>\n            </svg>',this.buttonUnorderedList.onclick=e=>{document.execCommand("insertUnorderedList",!1),this.update()},e.appendChild(this.buttonUnorderedList),this.buttonOrderedList=document.createElement("button"),this.buttonOrderedList.classList.add("right"),this.buttonOrderedList.innerHTML='<svg viewBox="0 0 17 10.5" width="17" height="10.5">\n            <line x1="4.5" y1="0" x2="4.5" y2="3" stroke="#000" />\n            <line x1="7" y1="1.5" x2="17" y2="1.5" stroke="#000"/>\n            <line x1="2.5" y1="4" x2="2.5" y2="7" stroke="#000" />\n            <line x1="4.5" y1="4" x2="4.5" y2="7" stroke="#000" />\n            <line x1="7" y1="5.5" x2="17" y2="5.5" stroke="#000"/>\n            <line x1="0.5" y1="8" x2="0.5" y2="11" stroke="#000" />\n            <line x1="2.5" y1="8" x2="2.5" y2="11" stroke="#000" />\n            <line x1="4.5" y1="8" x2="4.5" y2="11" stroke="#000" />\n            <line x1="7" y1="9.5" x2="17" y2="9.5" stroke="#000"/>\n            </svg>',this.buttonOrderedList.onclick=()=>{document.execCommand("insertOrderedList",!1),this.update()},e.appendChild(this.buttonOrderedList),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(s,!0)),this.shadowRoot.appendChild(e)}update(){this.buttonH1.classList.toggle("active","h1"===document.queryCommandValue("formatBlock")),this.buttonH2.classList.toggle("active","h2"===document.queryCommandValue("formatBlock")),this.buttonH3.classList.toggle("active","h3"===document.queryCommandValue("formatBlock")),this.buttonH4.classList.toggle("active","h4"===document.queryCommandValue("formatBlock")),this.buttonBold.classList.toggle("active",document.queryCommandState("bold")),this.buttonItalic.classList.toggle("active",document.queryCommandState("italic")),this.buttonUnderline.classList.toggle("active",document.queryCommandState("underline")),this.buttonStrikeThrough.classList.toggle("active",document.queryCommandState("strikeThrough")),this.buttonSubscript.classList.toggle("active",document.queryCommandState("subscript")),this.buttonSuperscript.classList.toggle("active",document.queryCommandState("superscript")),this.buttonJustifyLeft.classList.toggle("active",document.queryCommandState("justifyLeft")),this.buttonJustifyCenter.classList.toggle("active",document.queryCommandState("justifyCenter")),this.buttonJustifyRight.classList.toggle("active",document.queryCommandState("justifyRight"))}updateModel(){this.model}updateView(){this.model}}t.TextTool=r,window.customElements.define("toad-texttool",r);class d extends n.GenericView{constructor(){super();let e=document.createElement("div");this.content=e,e.classList.add("textarea"),e.contentEditable="true",e.oninput=t=>{let o=t.target.firstChild;o&&3===o.nodeType?document.execCommand("formatBlock",!1,"<div>"):"<br>"===e.innerHTML&&(e.innerHTML=""),this.updateModel()},e.onkeydown=e=>{!0===e.metaKey&&"b"===e.key?(e.preventDefault(),document.execCommand("bold",!1),this.updateTextTool()):!0===e.metaKey&&"i"===e.key?(e.preventDefault(),document.execCommand("italic",!1),this.updateTextTool()):!0===e.metaKey&&"u"===e.key?(e.preventDefault(),document.execCommand("underline",!1),this.updateTextTool()):"Tab"===e.key?e.preventDefault():"Enter"===e.key&&!0!==e.shiftKey&&"blockquote"===document.queryCommandValue("formatBlock")&&document.execCommand("formatBlock",!1,"<p>")},e.onkeyup=()=>{this.updateTextTool()},e.onmouseup=()=>{this.updateTextTool()},this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(s,!0)),this.shadowRoot.appendChild(e)}updateTextTool(){void 0!==r.texttool&&r.texttool.update()}updateModel(){this.model&&(this.model.promise=()=>this.content.innerHTML)}updateView(){this.model&&(this.model instanceof i.HtmlModel?this.content.innerHTML!==this.model.value&&(this.content.innerHTML=this.model.value):this.content.innerText!==this.model.value&&(this.content.innerText=this.model.value))}}t.TextArea=d,window.customElements.define("toad-textarea",d)},"./src/view/toolbutton.ts":
/*!********************************!*\
  !*** ./src/view/toolbutton.ts ***!
  \********************************/
/*! no static exports found */function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolButton=void 0;const i=o(/*! ../view */"./src/view.ts");let n=document.createElement("style");n.textContent="\ndiv {\n    border: 1px solid #e3dbdb;\n    border-radius: 5px;\n    background: #e3dbdb;\n    width: 32px;\n    height: 32px;\n    padding: 3px;\n}\n\n:host([selected]) div {\n    background: #ac9393;\n}\n\n:host([disabled]) div {\n    opacity: 0.5;\n}\n\n:host([disabled]) div img {\n    opacity: 0.5;\n}\n\n:host([checked][disabled]) div {\n}\n";class s extends i.GenericView{constructor(){super();let e=document.createElement("div");e.onmousedown=t=>{this.hasAttribute("disabled")||(e.focus(),t.preventDefault(),void 0!==this.model&&(this.model.stringValue=this.getValue()))};let t=document.createElement("img");this.hasAttribute("img")&&(t.src=this.getAttribute("img")),e.appendChild(t),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(document.importNode(n,!0)),this.shadowRoot.appendChild(e)}getValue(){let e=this.getAttribute("value");if(null===e)throw Error("no value");return e}connectedCallback(){super.connectedCallback(),void 0===this.model&&this.setAttribute("disabled","")}updateModel(){}updateView(){if(void 0===this.model)return this.setAttribute("disabled",""),void this.removeAttribute("selected");let e=this.getValue();this.model.isValidStringValue(e)?this.removeAttribute("disabled"):this.setAttribute("disabled",""),this.model.stringValue===e?this.setAttribute("selected",""):this.removeAttribute("selected")}}t.ToolButton=s,window.customElements.define("toad-toolbutton",s)}});
//# sourceMappingURL=toad.min.js.map